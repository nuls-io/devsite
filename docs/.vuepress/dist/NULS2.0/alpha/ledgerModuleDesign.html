<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Account Ledger module design document | NULS</title>
    <meta name="description" content="NULS">
    <link rel="icon" href="/icon.png">
    
    <link rel="preload" href="/assets/css/0.styles.3751d6d5.css" as="style"><link rel="preload" href="/assets/js/app.9a7036e8.js" as="script"><link rel="preload" href="/assets/js/47.66798c19.js" as="script"><link rel="prefetch" href="/assets/js/10.2cc8f5c2.js"><link rel="prefetch" href="/assets/js/100.d3a152d6.js"><link rel="prefetch" href="/assets/js/101.2a081cb7.js"><link rel="prefetch" href="/assets/js/102.a47ba456.js"><link rel="prefetch" href="/assets/js/103.d5ac9751.js"><link rel="prefetch" href="/assets/js/104.7595a7fc.js"><link rel="prefetch" href="/assets/js/105.828dda8f.js"><link rel="prefetch" href="/assets/js/106.e754f194.js"><link rel="prefetch" href="/assets/js/107.775c5175.js"><link rel="prefetch" href="/assets/js/108.8b1f0e7f.js"><link rel="prefetch" href="/assets/js/109.2f3b3253.js"><link rel="prefetch" href="/assets/js/11.b0ceb74e.js"><link rel="prefetch" href="/assets/js/110.aa04c678.js"><link rel="prefetch" href="/assets/js/111.f62d78bb.js"><link rel="prefetch" href="/assets/js/112.69acd927.js"><link rel="prefetch" href="/assets/js/113.888160f3.js"><link rel="prefetch" href="/assets/js/114.29e41199.js"><link rel="prefetch" href="/assets/js/115.d2ee5369.js"><link rel="prefetch" href="/assets/js/116.51fc87d4.js"><link rel="prefetch" href="/assets/js/117.4c9dc648.js"><link rel="prefetch" href="/assets/js/118.83070636.js"><link rel="prefetch" href="/assets/js/119.665c7995.js"><link rel="prefetch" href="/assets/js/12.02dfbd69.js"><link rel="prefetch" href="/assets/js/120.214bbe7a.js"><link rel="prefetch" href="/assets/js/121.bf9971ed.js"><link rel="prefetch" href="/assets/js/122.7560b52a.js"><link rel="prefetch" href="/assets/js/123.1d267c1f.js"><link rel="prefetch" href="/assets/js/124.f5bbb448.js"><link rel="prefetch" href="/assets/js/125.376b8644.js"><link rel="prefetch" href="/assets/js/126.f44dfff9.js"><link rel="prefetch" href="/assets/js/127.4bfabc7b.js"><link rel="prefetch" href="/assets/js/128.f1386192.js"><link rel="prefetch" href="/assets/js/129.bc8e43b2.js"><link rel="prefetch" href="/assets/js/13.6ff2f0d4.js"><link rel="prefetch" href="/assets/js/130.cacc4ae3.js"><link rel="prefetch" href="/assets/js/131.84d456ba.js"><link rel="prefetch" href="/assets/js/132.2aae8ca6.js"><link rel="prefetch" href="/assets/js/133.1a312ad1.js"><link rel="prefetch" href="/assets/js/134.703ce965.js"><link rel="prefetch" href="/assets/js/135.8cee3887.js"><link rel="prefetch" href="/assets/js/136.b36f5811.js"><link rel="prefetch" href="/assets/js/137.eda59c8e.js"><link rel="prefetch" href="/assets/js/138.551346e5.js"><link rel="prefetch" href="/assets/js/139.3a3f1471.js"><link rel="prefetch" href="/assets/js/14.fa820f23.js"><link rel="prefetch" href="/assets/js/140.1e504789.js"><link rel="prefetch" href="/assets/js/141.4bf908a3.js"><link rel="prefetch" href="/assets/js/142.618b966f.js"><link rel="prefetch" href="/assets/js/143.36491f90.js"><link rel="prefetch" href="/assets/js/144.76d9a156.js"><link rel="prefetch" href="/assets/js/145.be4615d5.js"><link rel="prefetch" href="/assets/js/146.a073f6bd.js"><link rel="prefetch" href="/assets/js/147.fec28542.js"><link rel="prefetch" href="/assets/js/148.1a4b00b2.js"><link rel="prefetch" href="/assets/js/149.6671cebe.js"><link rel="prefetch" href="/assets/js/15.1f656e2a.js"><link rel="prefetch" href="/assets/js/150.75db4652.js"><link rel="prefetch" href="/assets/js/151.b3ee235e.js"><link rel="prefetch" href="/assets/js/152.63fb9894.js"><link rel="prefetch" href="/assets/js/153.852b7cff.js"><link rel="prefetch" href="/assets/js/154.dbd3a07d.js"><link rel="prefetch" href="/assets/js/155.6f6f946b.js"><link rel="prefetch" href="/assets/js/156.8e16b0e8.js"><link rel="prefetch" href="/assets/js/157.8dbfeb43.js"><link rel="prefetch" href="/assets/js/158.919c857b.js"><link rel="prefetch" href="/assets/js/159.09925f42.js"><link rel="prefetch" href="/assets/js/16.aa19419e.js"><link rel="prefetch" href="/assets/js/160.797785d9.js"><link rel="prefetch" href="/assets/js/161.4d34eb09.js"><link rel="prefetch" href="/assets/js/162.94099c67.js"><link rel="prefetch" href="/assets/js/163.9f984d63.js"><link rel="prefetch" href="/assets/js/164.9e26163d.js"><link rel="prefetch" href="/assets/js/165.c8de855f.js"><link rel="prefetch" href="/assets/js/166.d8e0213d.js"><link rel="prefetch" href="/assets/js/167.778d1b2a.js"><link rel="prefetch" href="/assets/js/168.6ad455d7.js"><link rel="prefetch" href="/assets/js/169.f26a480a.js"><link rel="prefetch" href="/assets/js/17.4eef6f4e.js"><link rel="prefetch" href="/assets/js/170.9f0e1298.js"><link rel="prefetch" href="/assets/js/171.fc4a1cfb.js"><link rel="prefetch" href="/assets/js/172.d5c28bec.js"><link rel="prefetch" href="/assets/js/173.2cfc6896.js"><link rel="prefetch" href="/assets/js/174.6ac11f1d.js"><link rel="prefetch" href="/assets/js/175.ff16c02e.js"><link rel="prefetch" href="/assets/js/176.5d7156d4.js"><link rel="prefetch" href="/assets/js/177.89dacd78.js"><link rel="prefetch" href="/assets/js/178.a59d32eb.js"><link rel="prefetch" href="/assets/js/179.a6c468fe.js"><link rel="prefetch" href="/assets/js/18.f6c2f0b8.js"><link rel="prefetch" href="/assets/js/180.ebd647d5.js"><link rel="prefetch" href="/assets/js/181.872ce38a.js"><link rel="prefetch" href="/assets/js/182.0db6d70c.js"><link rel="prefetch" href="/assets/js/183.963128a1.js"><link rel="prefetch" href="/assets/js/184.b537b1fa.js"><link rel="prefetch" href="/assets/js/185.30696c6b.js"><link rel="prefetch" href="/assets/js/186.0ad2973d.js"><link rel="prefetch" href="/assets/js/187.ada551ca.js"><link rel="prefetch" href="/assets/js/188.0bf963be.js"><link rel="prefetch" href="/assets/js/189.39991fc7.js"><link rel="prefetch" href="/assets/js/19.c066ca9d.js"><link rel="prefetch" href="/assets/js/190.7453b0ea.js"><link rel="prefetch" href="/assets/js/191.6f8d2b48.js"><link rel="prefetch" href="/assets/js/192.ffa7a0ae.js"><link rel="prefetch" href="/assets/js/193.6b5187de.js"><link rel="prefetch" href="/assets/js/194.33c85b12.js"><link rel="prefetch" href="/assets/js/195.6ce6baa9.js"><link rel="prefetch" href="/assets/js/196.b7f7795d.js"><link rel="prefetch" href="/assets/js/197.56c70085.js"><link rel="prefetch" href="/assets/js/198.2b4a23bb.js"><link rel="prefetch" href="/assets/js/199.07618bd4.js"><link rel="prefetch" href="/assets/js/2.434158f1.js"><link rel="prefetch" href="/assets/js/20.5171c565.js"><link rel="prefetch" href="/assets/js/200.cd38ef32.js"><link rel="prefetch" href="/assets/js/201.63a35536.js"><link rel="prefetch" href="/assets/js/202.8463e76c.js"><link rel="prefetch" href="/assets/js/203.c2eff4d8.js"><link rel="prefetch" href="/assets/js/204.1b6a7ee2.js"><link rel="prefetch" href="/assets/js/205.84d64836.js"><link rel="prefetch" href="/assets/js/21.db5c56e6.js"><link rel="prefetch" href="/assets/js/22.498863f8.js"><link rel="prefetch" href="/assets/js/23.9f1f092a.js"><link rel="prefetch" href="/assets/js/24.2dd53084.js"><link rel="prefetch" href="/assets/js/25.0460bbcd.js"><link rel="prefetch" href="/assets/js/26.cac7fce9.js"><link rel="prefetch" href="/assets/js/27.d07d1fcb.js"><link rel="prefetch" href="/assets/js/28.af448362.js"><link rel="prefetch" href="/assets/js/29.014f7be8.js"><link rel="prefetch" href="/assets/js/3.944c2fb9.js"><link rel="prefetch" href="/assets/js/30.71024fdc.js"><link rel="prefetch" href="/assets/js/31.a1d400ee.js"><link rel="prefetch" href="/assets/js/32.f6916684.js"><link rel="prefetch" href="/assets/js/33.7a11d236.js"><link rel="prefetch" href="/assets/js/34.2e902b60.js"><link rel="prefetch" href="/assets/js/35.77cbe800.js"><link rel="prefetch" href="/assets/js/36.b4a03b7d.js"><link rel="prefetch" href="/assets/js/37.835e1993.js"><link rel="prefetch" href="/assets/js/38.d905a078.js"><link rel="prefetch" href="/assets/js/39.9a0ea84a.js"><link rel="prefetch" href="/assets/js/4.10b50b1a.js"><link rel="prefetch" href="/assets/js/40.6894dc38.js"><link rel="prefetch" href="/assets/js/41.9abdd72f.js"><link rel="prefetch" href="/assets/js/42.791cbfec.js"><link rel="prefetch" href="/assets/js/43.b4204359.js"><link rel="prefetch" href="/assets/js/44.79523177.js"><link rel="prefetch" href="/assets/js/45.52dab45f.js"><link rel="prefetch" href="/assets/js/46.d45f0044.js"><link rel="prefetch" href="/assets/js/48.2f7186f9.js"><link rel="prefetch" href="/assets/js/49.5efe22f1.js"><link rel="prefetch" href="/assets/js/5.54beffe8.js"><link rel="prefetch" href="/assets/js/50.76124638.js"><link rel="prefetch" href="/assets/js/51.b430df64.js"><link rel="prefetch" href="/assets/js/52.dc55c14c.js"><link rel="prefetch" href="/assets/js/53.32933bde.js"><link rel="prefetch" href="/assets/js/54.5f4ba8e6.js"><link rel="prefetch" href="/assets/js/55.07cb4238.js"><link rel="prefetch" href="/assets/js/56.051d4b4e.js"><link rel="prefetch" href="/assets/js/57.bd3f6e79.js"><link rel="prefetch" href="/assets/js/58.220ce9c8.js"><link rel="prefetch" href="/assets/js/59.896c6030.js"><link rel="prefetch" href="/assets/js/6.0c2e36a1.js"><link rel="prefetch" href="/assets/js/60.b8253c86.js"><link rel="prefetch" href="/assets/js/61.f607b3ec.js"><link rel="prefetch" href="/assets/js/62.a2eb63e8.js"><link rel="prefetch" href="/assets/js/63.ab079e01.js"><link rel="prefetch" href="/assets/js/64.ab1a2432.js"><link rel="prefetch" href="/assets/js/65.23af0670.js"><link rel="prefetch" href="/assets/js/66.2cf2b73c.js"><link rel="prefetch" href="/assets/js/67.dd039849.js"><link rel="prefetch" href="/assets/js/68.c1f2396d.js"><link rel="prefetch" href="/assets/js/69.f64d6dc5.js"><link rel="prefetch" href="/assets/js/7.66c6371d.js"><link rel="prefetch" href="/assets/js/70.1b8f30ff.js"><link rel="prefetch" href="/assets/js/71.6abde1ee.js"><link rel="prefetch" href="/assets/js/72.a80f16f5.js"><link rel="prefetch" href="/assets/js/73.6690fcbd.js"><link rel="prefetch" href="/assets/js/74.d7f82bfd.js"><link rel="prefetch" href="/assets/js/75.fc906157.js"><link rel="prefetch" href="/assets/js/76.106a4524.js"><link rel="prefetch" href="/assets/js/77.ad77edec.js"><link rel="prefetch" href="/assets/js/78.10c7b197.js"><link rel="prefetch" href="/assets/js/79.08097c6d.js"><link rel="prefetch" href="/assets/js/8.b37e7034.js"><link rel="prefetch" href="/assets/js/80.c33bd3c0.js"><link rel="prefetch" href="/assets/js/81.c1c8227b.js"><link rel="prefetch" href="/assets/js/82.042ca332.js"><link rel="prefetch" href="/assets/js/83.371427a4.js"><link rel="prefetch" href="/assets/js/84.95658ce6.js"><link rel="prefetch" href="/assets/js/85.e4365ba5.js"><link rel="prefetch" href="/assets/js/86.c5ed5194.js"><link rel="prefetch" href="/assets/js/87.1a56019a.js"><link rel="prefetch" href="/assets/js/88.a0664933.js"><link rel="prefetch" href="/assets/js/89.365bb774.js"><link rel="prefetch" href="/assets/js/9.c34e88ed.js"><link rel="prefetch" href="/assets/js/90.2330af89.js"><link rel="prefetch" href="/assets/js/91.25be9d8a.js"><link rel="prefetch" href="/assets/js/92.7fca59f6.js"><link rel="prefetch" href="/assets/js/93.5d25de24.js"><link rel="prefetch" href="/assets/js/94.52f3f774.js"><link rel="prefetch" href="/assets/js/95.3da9bca5.js"><link rel="prefetch" href="/assets/js/96.24b73c87.js"><link rel="prefetch" href="/assets/js/97.cd2d42fb.js"><link rel="prefetch" href="/assets/js/98.a520e926.js"><link rel="prefetch" href="/assets/js/99.22c2d988.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3751d6d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NULS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/NULS1.0/" class="nav-link">NULS1.0</a></div><div class="nav-item"><a href="/NULS2.0/" class="nav-link router-link-active">NULS2.0</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NULS2.0/alpha/ledgerModuleDesign.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/learn/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/NULS1.0/" class="nav-link">NULS1.0</a></div><div class="nav-item"><a href="/NULS2.0/" class="nav-link router-link-active">NULS2.0</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NULS2.0/alpha/ledgerModuleDesign.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Alpha</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/NULS2.0/quickStart.html" class="sidebar-link">Quick Start</a></li><li><a href="/NULS2.0/packageGeneration.html" class="sidebar-link">Package Generation</a></li><li><a href="/NULS2.0/developModule.html" class="sidebar-link">Develop Business Modules</a></li><li><a href="/NULS2.0/linuxTutorial.html" class="sidebar-link">Linux CLI Manual</a></li><li><a href="/NULS2.0/howToUseNulsBuildChain.html" class="sidebar-link">Build Chain</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Smart Contract</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/NULS2.0/startSmartContract.html" class="sidebar-link">Quick Start</a></li><li><a href="/NULS2.0/developerManual.html" class="sidebar-link">Development Manual</a></li><li><a href="/NULS2.0/ideaPlugin.html" class="sidebar-link">IDEA Plugin</a></li><li><a href="/NULS2.0/NRC-20TokenStandard.html" class="sidebar-link">NRC-20 Token Standard</a></li><li><a href="/NULS2.0/smartContractFee.html" class="sidebar-link">Service Charge</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="account-ledger-module-design-document"><a href="#account-ledger-module-design-document" aria-hidden="true" class="header-anchor">#</a> Account Ledger module design document</h1> <p>[TOC]</p> <h2 id="_1-overall-description"><a href="#_1-overall-description" aria-hidden="true" class="header-anchor">#</a> 1. Overall description</h2> <h3 id="_1-1-module-overview"><a href="#_1-1-module-overview" aria-hidden="true" class="header-anchor">#</a> 1.1 Module Overview</h3> <h4 id="_1-1-1-why-do-you-have-a-ledger-module"><a href="#_1-1-1-why-do-you-have-a-ledger-module" aria-hidden="true" class="header-anchor">#</a> 1.1.1 Why do you have a &quot;Ledger module&quot;?</h4> <blockquote><p>The ledger module is the data hub of the blockchain. The balances and transactions of all accounts are saved in the ledger module.
  A network-wide account ledger is saved on each network node to ensure complete, open and transparent data, while ensuring that data cannot be tampered and traceable.</p></blockquote> <h4 id="_1-1-2-what-should-be-done-in-the-ledger-module"><a href="#_1-1-2-what-should-be-done-in-the-ledger-module" aria-hidden="true" class="header-anchor">#</a> 1.1.2 What should be done in the Ledger Module?</h4> <blockquote><p>Provide data support for assembly transactions, mainly accounting and auditing, verify the legality of the transaction, such as: whether there is sufficient balance, whether to repeat payment (double flower)</p></blockquote> <h4 id="_1-1-3-positioning-of-the-ledger-module-in-the-system"><a href="#_1-1-3-positioning-of-the-ledger-module-in-the-system" aria-hidden="true" class="header-anchor">#</a> 1.1.3 Positioning of the &quot;Ledger module&quot; in the system</h4> <blockquote><p>The ledger module is the data hub, which stores the result data of all existing transactions in the system. It does not depend on any business modules, and other modules depend on it as needed.</p></blockquote> <h4 id="_1-1-4-explanation-of-terms-in-ledger-module"><a href="#_1-1-4-explanation-of-terms-in-ledger-module" aria-hidden="true" class="header-anchor">#</a> 1.1.4 Explanation of terms in &quot;Ledger module&quot;</h4> <ul><li>The random number of the transaction (nonce, a 32-bit hash value)
<ul><li>nonce: A scalar value equal to the number of transactions sent at this address, which will be included in every transaction initiated by the user.</li> <li>Each transaction in the account needs to save the nonce (hash) of the previous transaction</li> <li>Strictly speaking, a nonce is an attribute of the originating address (it only makes sense in the context of the sending address). However, the nonce is not explicitly stored in the blockchain as part of the account status.</li> <li>The nonce value is also used to prevent incorrect calculation of account balances. For example, suppose an account has 10 NULS balances and signs two transactions, all of which cost 6 NULS with nonce 1 and nonce 2, respectively. Which of the two transactions is valid? In a blockchain distributed system, nodes may receive transactions out of order. Nonce forces transactions of any address to be processed in order, regardless of the interval, regardless of the order in which the nodes receive. This way, all nodes will calculate the same balance. The transaction paying 6 Ethereum will be successfully processed and the account balance will be reduced to 4 ether. Whenever it is received, all nodes believe that the transaction with nonce 2 is invalid. If a node receives a nonce 2 transaction first, it will hold it, but will not verify it until it receives and processes the nonce 1 transaction.</li> <li>Use nonce to ensure that all nodes calculate the same balance and correctly sort the transactions, which is equivalent to the mechanism used in Bitcoin to prevent &quot;double payment&quot;. However, because Ethereum tracks account balances and does not track individual coins separately (called UTXO in Bitcoin), &quot;double payments&quot; occur only when the account balance is incorrectly calculated. The nonce mechanism prevents this from happening.</li></ul></li></ul> <h3 id="_1-2-architecture"><a href="#_1-2-architecture" aria-hidden="true" class="header-anchor">#</a> 1.2 Architecture</h3> <blockquote><p>The core of the Ledger is assets management and ledger management.</p></blockquote> <p><img src="/assets/img/ledger-arch.865ff93a.png" alt="ledger-arch.png"></p> <h2 id="_2-functional-design"><a href="#_2-functional-design" aria-hidden="true" class="header-anchor">#</a> 2. functional design</h2> <h3 id="_2-1-functional-architecture"><a href="#_2-1-functional-architecture" aria-hidden="true" class="header-anchor">#</a> 2.1 Functional Architecture</h3> <p><img src="/assets/img/ledger-functions.e4039436.png" alt="ledger-functions.png"></p> <h3 id="_2-2-module-service"><a href="#_2-2-module-service" aria-hidden="true" class="header-anchor">#</a> 2.2 Module Service</h3> <h4 id="_2-2-1-system-service-of-the-ledger-module"><a href="#_2-2-1-system-service-of-the-ledger-module" aria-hidden="true" class="header-anchor">#</a> 2.2.1 System Service of the Ledger Module</h4> <p><img src="/assets/img/ledger-service.219cab8a.png" alt="ledger-service.png"></p> <blockquote><p>The RPC interface call provided by the ledger module. For detailed interface, please refer to the interface design section.</p></blockquote> <h4 id="_2-2-2-modifying-system-operating-parameters"><a href="#_2-2-2-modifying-system-operating-parameters" aria-hidden="true" class="header-anchor">#</a> 2.2.2 Modifying system operating parameters</h4> <blockquote><p>Only rely on the core system, the core system can start, stop, modify parameters, etc. of the event module system,</p></blockquote> <h3 id="_2-3-module-internal-function"><a href="#_2-3-module-internal-function" aria-hidden="true" class="header-anchor">#</a> 2.3 Module internal function</h3> <h4 id="_2-3-1-hot-online-transaction-processing"><a href="#_2-3-1-hot-online-transaction-processing" aria-hidden="true" class="header-anchor">#</a> 2.3.1 Hot (online) transaction processing</h4> <blockquote><p>Module internal work mainly includes asset management, obtaining account address balance and nonce, and verifying transaction coinData.</p></blockquote> <ul><li>asset Management
<ul><li>Total assets of the account</li> <li>Available assets</li> <li>Freeze assets. For locked assets, separate record and locked asset information, including chain ID, asset ID, asset amount, lock time, lock height, etc.</li> <li>In the asset unlocking process, when the user's locked asset time or height reaches the unlock condition, the account will unlock the asset information, accumulate the available balance, and delete the asset lock record of the local data.</li> <li>Multi-asset situation, need to join chainId.</li></ul></li> <li>Get account address balance and nonce
<ul><li>Get account address balance</li> <li>Get the account address nonce (the nonce is a hash value, meaning that the nonce of the first transaction is 0. Each transaction in the account will contain the nonce value of the previous transaction)</li></ul></li> <li>Verify the transaction
<ul><li>Double flower verification (nonce mechanism prevents double payment)</li> <li>Transaction creator verification, verifying that the issuer of the transaction has sufficient balance to verify that the nonce of the transaction creator is legal</li> <li>Continuous transaction verification</li></ul></li> <li>Function Interface Management (rpc)
<ul><li>rpc interface for use by other modules</li></ul></li></ul> <h4 id="_2-3-2-cold-offline-transaction-processing"><a href="#_2-3-2-cold-offline-transaction-processing" aria-hidden="true" class="header-anchor">#</a> 2.3.2 Cold (offline) transaction processing</h4> <blockquote><p>A cold wallet is an unconnected wallet, also called an offline wallet. A hot wallet is a wallet that keeps online, that is, an online wallet. Cold wallets are not more secure than hot wallets.</p></blockquote> <blockquote><p>Since the cold wallet only signs the transaction information, the signed hex string is transmitted to the server through the hot wallet, and then the server performs unified transaction processing, so the client needs to perform the offline signature function.
The offline transaction system maintains the storage information of the nonce. After using a nonce, the nonce is saved in the business system.</p></blockquote> <h3 id="_2-4-ledger-flowcharts"><a href="#_2-4-ledger-flowcharts" aria-hidden="true" class="header-anchor">#</a> 2.4 Ledger flowcharts</h3> <h4 id="_2-4-1-transfer-transaction-process"><a href="#_2-4-1-transfer-transaction-process" aria-hidden="true" class="header-anchor">#</a> 2.4.1 Transfer Transaction Process</h4> <ul><li>User enters the address of the transfer and the transferred address and the transferred amount</li> <li>The system signs the transfer information by the private key of the transferred address (used to prove that the transaction was actually initiated by me)</li> <li>The system verifies the transaction information
<ul><li>Balance verification</li> <li>Fee verification</li> <li>nonce continuity verification</li> <li>Signature and input account verification</li></ul></li> <li>Put this transaction into the local TxPool (that is, the account unconfirmed trading pool)</li> <li>Broadcast transaction information to other nodes</li> <li>Packing blocks, verifying blocks</li> <li>Confirm transaction
<ul><li>Update the balance of all accounts related (transferred or transferred)</li> <li>Update the nonce corresponding to the account asset</li></ul></li></ul> <h4 id="_2-4-2-ordinary-transaction-process-reference-example"><a href="#_2-4-2-ordinary-transaction-process-reference-example" aria-hidden="true" class="header-anchor">#</a> 2.4.2 Ordinary transaction process (reference example)</h4> <p><img src="/assets/img/eth-transaction-flow.6f3dd253.png" alt="eth-transaction-flow.png"></p> <h4 id="_2-4-3-transaction-verification-process"><a href="#_2-4-3-transaction-verification-process" aria-hidden="true" class="header-anchor">#</a> 2.4.3 Transaction verification process</h4> <p><img src="/assets/img/trx-validate-flow.fd3d46e4.png" alt="trx-validate-flow.png"></p> <h2 id="_3-interface-design"><a href="#_3-interface-design" aria-hidden="true" class="header-anchor">#</a> 3.Interface design</h2> <h3 id="_3-1-module-core-interaction-interface"><a href="#_3-1-module-core-interaction-interface" aria-hidden="true" class="header-anchor">#</a> 3.1 Module core interaction interface</h3> <h4 id="_3-1-1-get-account-balance"><a href="#_3-1-1-get-account-balance" aria-hidden="true" class="header-anchor">#</a> 3.1.1  Get account balance</h4> <blockquote><p>cmd: getBalance</p></blockquote> <h5 id="parameter-description-request"><a href="#parameter-description-request" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>address</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">The address to check the balance</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset-initiated chain ID</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x407d73d8a49eeb85d32cf465507dd71d507100c1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span><span class="token number">34</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response"><a href="#return-value-description-response" aria-hidden="true" class="header-anchor">#</a> Return value description (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> 
       <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
       <span class="token property">&quot;freeze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;200000000&quot;</span><span class="token punctuation">,</span>
       <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12000000000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>remarks: 1NULS=10^8Na</p></blockquote> <table><thead><tr><th>Field</th> <th style="text-align:center">type</th> <th style="text-align:right">DESC</th></tr></thead> <tbody><tr><td>available</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Available Balance</td></tr> <tr><td>freeze</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">freeze</td></tr> <tr><td>total</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">total = available+freeze</td></tr></tbody></table> <h4 id="_3-1-2-get-the-current-account-nonce-value"><a href="#_3-1-2-get-the-current-account-nonce-value" aria-hidden="true" class="header-anchor">#</a> 3.1.2 Get the current account nonce value</h4> <blockquote><p>cmd: getNonce</p></blockquote> <h5 id="parameter-description-request-2"><a href="#parameter-description-request-2" aria-hidden="true" class="header-anchor">#</a> Parameter Description(request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>address</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">The address to check the balance</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Asset-initiated chain ID</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x407d73d8a49eeb85d32cf465507dd71d507100c1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span><span class="token number">34</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-2"><a href="#return-value-description-response-2" aria-hidden="true" class="header-anchor">#</a> Return value description(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span><span class="token string">&quot;xxxxxxxxxxx&quot;</span>，
   <span class="token property">&quot;nonceType&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>nonce</td> <td style="text-align:center">String</td> <td style="text-align:right">Spending transaction hash</td></tr> <tr><td>nonceType</td> <td style="text-align:center">int</td> <td style="text-align:right">1The last transaction has been confirmed, 0 the transaction has not been confirmed</td></tr></tbody></table> <h4 id="_3-1-3-get-balance-and-nonce-value"><a href="#_3-1-3-get-balance-and-nonce-value" aria-hidden="true" class="header-anchor">#</a> 3.1.3 Get balance and nonce value</h4> <blockquote><p>cmd: getBalanceNonce</p></blockquote> <h5 id="parameter-description-request-3"><a href="#parameter-description-request-3" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <h5 id><a href="#" aria-hidden="true" class="header-anchor">#</a></h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>address</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">The address to check the balance</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Asset-initiated chain ID</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x407d73d8a49eeb85d32cf465507dd71d507100c1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span><span class="token string">&quot;34&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description：-response"><a href="#return-value-description：-response" aria-hidden="true" class="header-anchor">#</a> Return value description：(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>available</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">User available balance</td></tr> <tr><td>nonce</td> <td style="text-align:center">String</td> <td style="text-align:right">A random value of the account that holds the hash of the user's last transaction.</td></tr></tbody></table> <h4 id="_3-1-4-verify-coindata"><a href="#_3-1-4-verify-coindata" aria-hidden="true" class="header-anchor">#</a> 3.1.4  Verify coinData</h4> <blockquote><p>cmd: validateCoinData</p></blockquote> <h5 id="parameter-description-request-4"><a href="#parameter-description-request-4" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">Type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Transaction hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">458</span><span class="token punctuation">,</span>
    <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description：-response-2"><a href="#return-value-description：-response-2" aria-hidden="true" class="header-anchor">#</a> Return value description：(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;validateCode&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;validateDesc&quot;</span><span class="token operator">:</span><span class="token string">&quot;success&quot;</span> 
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>validateCode</td> <td style="text-align:center">int</td> <td style="text-align:right">1 check pass, 2 orphan trade 3 double flower 4 other abnormalities</td></tr> <tr><td>validateDesc</td> <td style="text-align:center">String</td> <td style="text-align:right">Check return description</td></tr></tbody></table> <h4 id="_3-1-5-submit-unconfirmed-transaction"><a href="#_3-1-5-submit-unconfirmed-transaction" aria-hidden="true" class="header-anchor">#</a> 3.1.5  Submit unconfirmed transaction</h4> <blockquote><p>cmd: commitUnconfirmedTx</p></blockquote> <h5 id="parameter-description-request-5"><a href="#parameter-description-request-5" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">Type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Transaction hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
    <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description：-response-3"><a href="#return-value-description：-response-3" aria-hidden="true" class="header-anchor">#</a> Return value description：(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>value</td> <td style="text-align:center">int</td> <td style="text-align:right">1 submission passed, 0 submission failed</td></tr></tbody></table> <h4 id="_3-1-6-batch-verification-notify"><a href="#_3-1-6-batch-verification-notify" aria-hidden="true" class="header-anchor">#</a> 3.1.6  Batch verification notify</h4> <blockquote><p>cmd: bathValidateBegin</p></blockquote> <h5 id="parameter-description-request-6"><a href="#parameter-description-request-6" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">Type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">接口调用链的链Id</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span>  
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description：-response-4"><a href="#return-value-description：-response-4" aria-hidden="true" class="header-anchor">#</a> Return value description：(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:center">Desc</th></tr></thead> <tbody><tr><td>result</td> <td style="text-align:center">int</td> <td style="text-align:center">1成功，0失败</td></tr></tbody></table> <h4 id="_3-1-7-receive-batch-verification-one-by-one"><a href="#_3-1-7-receive-batch-verification-one-by-one" aria-hidden="true" class="header-anchor">#</a> 3.1.7  Receive batch verification one by one</h4> <blockquote><p>cmd: bathValidatePerTx</p></blockquote> <h5 id="parameter-description-request-7"><a href="#parameter-description-request-7" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Transaction hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description：-response-5"><a href="#return-value-description：-response-5" aria-hidden="true" class="header-anchor">#</a> Return value description：(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>result</td> <td style="text-align:center">int</td> <td style="text-align:right">1 success, 0 failed</td></tr></tbody></table> <h4 id="_3-1-8-submit-confirmation-transactions-one-by-one"><a href="#_3-1-8-submit-confirmation-transactions-one-by-one" aria-hidden="true" class="header-anchor">#</a> 3.1.8  Submit confirmation transactions one by one</h4> <blockquote><p>cmd: commitConfirmTx</p></blockquote> <h5 id="parameter-description-request-8"><a href="#parameter-description-request-8" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Transaction hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description：-response-6"><a href="#return-value-description：-response-6" aria-hidden="true" class="header-anchor">#</a> Return value description：(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>result</td> <td style="text-align:center">int</td> <td style="text-align:right">1Success，0 failed</td></tr></tbody></table> <h4 id="_3-1-9-rollback-transaction"><a href="#_3-1-9-rollback-transaction" aria-hidden="true" class="header-anchor">#</a> 3.1.9  Rollback transaction</h4> <blockquote><p>cmd: rollBackConfirmTx</p></blockquote> <h5 id="parameter-description-request-9"><a href="#parameter-description-request-9" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">Type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Transaction hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description：-response-7"><a href="#return-value-description：-response-7" aria-hidden="true" class="header-anchor">#</a> Return value description：(response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>result</td> <td style="text-align:center">int</td> <td style="text-align:right">1Success，0 failed</td></tr></tbody></table> <h3 id="_3-2-other-interface"><a href="#_3-2-other-interface" aria-hidden="true" class="header-anchor">#</a> 3.2 Other interface</h3> <h4 id="_3-2-1-obtain-asset-information-based-on-asset-id"><a href="#_3-2-1-obtain-asset-information-based-on-asset-id" aria-hidden="true" class="header-anchor">#</a> 3.2.1 Obtain asset information based on asset id</h4> <blockquote><p>cmd: getAsset</p></blockquote> <h5 id="parameter-description-request-10"><a href="#parameter-description-request-10" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required or not</th> <th style="text-align:right">type</th> <th style="text-align:right">desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of the interface call chain</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Asset-initiated chain ID</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
  <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span> <span class="token number">41</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-3"><a href="#return-value-description-response-3" aria-hidden="true" class="header-anchor">#</a> Return value description (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span> <span class="token number">41</span><span class="token punctuation">,</span>
    <span class="token property">&quot;balance&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;freeze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;200000000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12000000000&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Type</th> <th style="text-align:right">Desc</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">int</td> <td style="text-align:right">The chain ID of the initiating call</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">int</td> <td style="text-align:right">Asset-initiated chain id</td></tr> <tr><td>assetId</td> <td style="text-align:center">int</td> <td style="text-align:right">Asset ID</td></tr> <tr><td>balance.available</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Available Balance</td></tr> <tr><td>balance.freeze</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Freeze balance</td></tr> <tr><td>balance.total</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">total = available+freeze</td></tr></tbody></table> <h2 id="_4-description-of-the-event"><a href="#_4-description-of-the-event" aria-hidden="true" class="header-anchor">#</a> 4. Description of the event</h2> <blockquote><p>does not depend on any events</p></blockquote> <h2 id="_5-agreement"><a href="#_5-agreement" aria-hidden="true" class="header-anchor">#</a> 5. agreement</h2> <h3 id="_5-1-network-communication-protocol"><a href="#_5-1-network-communication-protocol" aria-hidden="true" class="header-anchor">#</a> 5.1 Network Communication Protocol</h3> <p>NA</p> <h3 id="_5-2-trading-agreement"><a href="#_5-2-trading-agreement" aria-hidden="true" class="header-anchor">#</a> 5.2 Trading Agreement</h3> <h2 id="_6-module-configuration"><a href="#_6-module-configuration" aria-hidden="true" class="header-anchor">#</a> 6. Module Configuration</h2> <h3 id="_6-1-configuration-instructions"><a href="#_6-1-configuration-instructions" aria-hidden="true" class="header-anchor">#</a> 6.1 Configuration Instructions</h3> <h3 id="_6-2-module-dependencies"><a href="#_6-2-module-dependencies" aria-hidden="true" class="header-anchor">#</a> 6.2 Module Dependencies</h3> <ul><li>Kernel module
<ul><li>Module registration</li> <li>Module logout</li> <li>Module status escalation (heartbeat)</li> <li>Service interface data acquisition and timing update</li></ul></li></ul> <h2 id="_7-java-specific-design"><a href="#_7-java-specific-design" aria-hidden="true" class="header-anchor">#</a> 7. Java-specific design</h2> <blockquote><p>Core object class definition, storing data structures, ...</p></blockquote> <h2 id="_8-supplementary-content"><a href="#_8-supplementary-content" aria-hidden="true" class="header-anchor">#</a> 8. supplementary content</h2> <h3 id="references-literature"><a href="#references-literature" aria-hidden="true" class="header-anchor">#</a> References Literature</h3> <ul><li><a href="https://github.com/inoutcode/ethereum_book/blob/master/%E7%AC%AC%E4%B8%83%E7%AB%A0.asciidoc" target="_blank" rel="noopener noreferrer">Proficient in Ethereum - Chapter 7 Transaction<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/nuls-io/devsite/edit/dev/docs/NULS2.0/alpha/ledgerModuleDesign.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/28/2019, 12:38:23 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.9a7036e8.js" defer></script><script src="/assets/js/47.66798c19.js" defer></script>
  </body>
</html>
