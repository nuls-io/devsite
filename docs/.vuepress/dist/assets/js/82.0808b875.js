(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{515:function(e,t,n){"use strict";n.r(t);var s=n(0),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("p",[e._v("An ENULS node is composed of two clients: an "),n("router-link",{attrs:{to:"./../#execution-clients"}},[e._v("execution client")]),e._v(" and a "),n("router-link",{attrs:{to:"./../#consensus-clients"}},[e._v("consensus client")]),e._v(".")],1),e._v(" "),n("p",[e._v("When ENULS was using "),n("router-link",{attrs:{to:"/developers/docs/consensus-mechanisms/pow/"}},[e._v("proof-of-work")]),e._v(", an execution client was enough to run a full ENULS node. However, since implementing "),n("router-link",{attrs:{to:"/developers/docs/consensus-mechanisms/pow/"}},[e._v("proof-of-stake")]),e._v(", the execution client needs to be used alongside another piece of software called a "),n("router-link",{attrs:{to:"/developers/docs/nodes-and-clients/#consensus-clients"}},[e._v("“consensus client”")]),e._v(".")],1),e._v(" "),n("p",[e._v("The diagram below shows the relationship between the two ENULS clients. The two clients connect to their own respective peer-to-peer (P2P) networks. Separate P2P networks are needed as the execution clients gossip transactions over their P2P network, enabling them to manage their local transaction pool, whilst the consensus clients gossip blocks over their P2P network, enabling consensus and chain growth.")]),e._v(" "),n("p",[e._v("For this two-client structure to work, consensus clients must be able to pass bundles of transactions to the execution client. Executing the transactions locally is how the client validates that the transactions do not violate any ENULS rules and that the proposed update to ENULS’s state is correct. Likewise, when the node is selected to be a block producer the consensus client must be able to request bundles of transactions from Geth to include in the new block and execute them to update the global state. This inter-client communication is handled by a local RPC connection using the "),n("a",{attrs:{href:"https://github.com/ENULS/execution-apis/blob/main/src/engine/common.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("engine API"),n("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(0),e._v(" "),n("p",[e._v("The execution client is responsible for transaction handling, transaction gossip, state management and supporting the ENULS Virtual Machine ("),n("router-link",{attrs:{to:"./../../evm/"}},[e._v("EVM")]),e._v("). However, it is "),n("strong",[e._v("not")]),e._v(" responsible for block building, block gossiping or handling consensus logic. These are in the remit of the consensus client.")],1),e._v(" "),e._m(1),e._v(" "),n("p",[e._v("The execution client also offers a user interface to ENULS through "),n("a",{attrs:{href:"/developers/docs/apis/json-rpc"}},[e._v("RPC methods")]),e._v(" that enable users to query the ENULS blockchain, submit transactions and deploy smart contracts. It's common for RPC calls to be handled by a library like "),n("a",{attrs:{href:"https://web3js.readthedocs.io/en/v1.8.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Web3js"),n("OutboundLink")],1),e._v(", "),n("a",{attrs:{href:"https://web3py.readthedocs.io/en/v5/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Web3py"),n("OutboundLink")],1),e._v(", or by a user-interface such as a browser wallet.")]),e._v(" "),n("p",[e._v("In summary, the execution client is:")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),n("p",[e._v("The consensus client deals with all the logic that enables a node to stay in sync with the ENULS network. This includes receiving blocks from peers and running a fork choice algorithm to ensure the node always follows the chain with the greatest accumulation of attestations (weighted by validator effective balances). Similar to the execution client, consensus clients have their own P2P network through which they share blocks and attestations.")]),e._v(" "),n("p",[e._v("The consensus client does not participate in attesting to or proposing blocks - this is done by a validator, an optional add-on to a consensus client. A consensus client without a validator only keeps up with the head of the chain, allowing the node to stay synced. This enables a user to transact with ENULS using their execution client, confident that they are on the correct chain.")]),e._v(" "),e._m(4),e._v(" "),n("p",[e._v("Node operators can add a validator to their consensus clients if 32 ETH is the deposit contract. The validator client comes bundled with the consensus client and can be added to a node at any time. The validator handles attestations and block proposals. They enable a node to accrue rewards or lose ETH via penalties or slashing. Running the validator software also makes a node eligible to be selected to propose a new block.")]),e._v(" "),n("p",[n("router-link",{attrs:{to:"/staking/"}},[e._v("More on staking")]),e._v(".")],1),e._v(" "),e._m(5),e._v(" "),e._m(6)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"what-does-the-execution-client-do"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-does-the-execution-client-do"}},[this._v("#")]),this._v(" What does the execution client do?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The execution client creates execution payloads - the list of transactions, updated state trie, and other execution-related data. Consensus clients include the execution payload in every block. The execution client is also responsible for re-executing transactions in new blocks to ensure they are valid. Executing transactions is done on the execution client's embedded computer, known as the "),t("a",{attrs:{href:"../../evm"}},[this._v("ENULS Virtual Machine (EVM)")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("a user gateway to ENULS")]),this._v(" "),t("li",[this._v("home to the ENULS Virtual Machine, ENULS's state and transaction pool.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"what-does-the-consensus-client-do"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-does-the-consensus-client-do"}},[this._v("#")]),this._v(" What does the consensus client do?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"validators"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validators"}},[this._v("#")]),this._v(" Validators")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"components-of-a-node-comparison"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#components-of-a-node-comparison"}},[this._v("#")]),this._v(" Components of a node comparison")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",[n("thead",[n("tr",[n("th",[e._v("Execution Client")]),e._v(" "),n("th",[e._v("Consensus Client")]),e._v(" "),n("th",[e._v("Validator")])])]),e._v(" "),n("tbody",[n("tr",[n("td",[e._v("Gossips transactions over its p2p network")]),e._v(" "),n("td",[e._v("Gossips blocks and attestations overs its p2p network")]),e._v(" "),n("td",[e._v("Proposes blocks")])]),e._v(" "),n("tr",[n("td",[e._v("Executes/re-executes transactions")]),e._v(" "),n("td",[e._v("Runs the fork choice algorithm")]),e._v(" "),n("td",[e._v("Accrues rewards/penalties")])]),e._v(" "),n("tr",[n("td",[e._v("Verifies incoming state changes")]),e._v(" "),n("td",[e._v("Keeps track of the head of the chain")]),e._v(" "),n("td",[e._v("Makes attestations")])]),e._v(" "),n("tr",[n("td",[e._v("Manages state and receipts tries")]),e._v(" "),n("td",[e._v("Manages the Beacon state (contains consensus and execution info)")]),e._v(" "),n("td",[e._v("Requires 32 ETH to be staked")])]),e._v(" "),n("tr",[n("td",[e._v("Creates execution payload")]),e._v(" "),n("td",[e._v("Keeps track of accumulated randomness in RANDAO")]),e._v(" "),n("td",[e._v("Proposes blocks")])]),e._v(" "),n("tr",[n("td",[e._v("Exposes JSON-RPC API for interacting with ENULS")]),e._v(" "),n("td",[e._v("Keeps track of justification and finalization")]),e._v(" "),n("td",[e._v("Can be slashed")])])])])}],!1,null,null,null);t.default=o.exports}}]);