(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{581:function(t,e,s){t.exports=s.p+"assets/img/modules.5667d6c6.png"},582:function(t,e,s){t.exports=s.p+"assets/img/module.84e040d4.png"},583:function(t,e,s){t.exports=s.p+"assets/img/mykernelstarted.cfb5fce2.png"},584:function(t,e,s){t.exports=s.p+"assets/img/ledger.d4383200.png"},585:function(t,e,s){t.exports=s.p+"assets/img/ledgerstart.e024f199.png"},586:function(t,e,s){t.exports=s.p+"assets/img/package.06d61e5f.png"},856:function(t,e,s){"use strict";s.r(e);var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"生成程序包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成程序包","aria-hidden":"true"}},[this._v("#")]),this._v(" 生成程序包")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"必备知识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#必备知识","aria-hidden":"true"}},[this._v("#")]),this._v(" 必备知识")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"获取程序源代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取程序源代码","aria-hidden":"true"}},[this._v("#")]),this._v(" 获取程序源代码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"调试程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#调试程序","aria-hidden":"true"}},[this._v("#")]),this._v(" 调试程序")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(581),alt:"modules"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(582),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(583),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(584),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(585),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"生成可执行程序包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成可执行程序包","aria-hidden":"true"}},[this._v("#")]),this._v(" 生成可执行程序包")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("./package.sh -J /usr/local/java/jdk11.0.2 -o ../NULS2\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(586),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("lijunzhou:nuls_2.0 zhoulijun$ ./package.sh -h\n    Desc: 使用此脚本将生成符合NULSTAR规范的可执行子模块，\n    \t  所有子模块按照module.ncf配置，使用mvn命令进行打包，并生成启动、停止脚本\n    Usage: ./package.sh \n    \t\t-b <branch> 打包前同步最新代码 参数为同步的远程分支名称\n    \t\t-p 打包前同步最新代码 从master分支拉取\n    \t\t-o <目录>  指定输出目录\n    \t\t-h 查看帮助\n    \t\t-j JAVA_HOME\n    \t\t-J 输出的jvm虚拟机目录，脚本将会把这个目录复制到程序依赖中\n    \t\t-i 跳过mvn打包\n    \t\t-z 生成压缩包\n    Author: zlj\n")])])])}],r=s(0),n=Object(r.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("Nuls2基础模块使用java11开发，使用分布式多模块的微服务架构，模块间使用websocket进行通信。但模块间并无语言要求，能支持websocket协议进行网络编程的语言理论上都可以成为NULS2的模块，所以需要对websocket协议有一定的了解。")]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("NULS2的源代码托管在github.com上，任何人可免费获取。项目地址"),s("a",{attrs:{href:"https://github.com/nuls-io/nuls_2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("nuls_2.0"),s("OutboundLink")],1),t._v("，获取方法参见"),s("a",{attrs:{href:"https://git-scm.com/book/en/v2",target:"_blank",rel:"noopener noreferrer"}},[t._v("git"),s("OutboundLink")],1)]),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("如果想要开发或者调试NULS2的源代码，需要先准备开发环境，依次安装JDK11.0.2、apache maven 3.3，以及一个趁手的开发工具，我们推荐IntelliJ IDEA。开发环境和源代码准备好后，在IDEA中用导入maven项目的方式导入程序模块。")]),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("模块根目录存在module.ncf文件的模块定义为nuls2子模块，其中mykernel为核心调度模块，此模块负责其他子模块注册服务。每个模块的启动类的命名方式为XXXXBootstrap,运行启动类的main函数启动模块。")]),t._v(" "),t._m(5),t._v(" "),s("p",[t._v('在开发环境中，首先需要启动mykernel模块，再启动其他模块，模块间的依赖关系由框架自动控制。在日志中打印"MYKELNEL STARTED. PORT:8887"时，mykernel模块启动成功。')]),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("启动其他模块（以ledger模块为例），找到LedgerBootstrap类，运行main函数。")]),t._v(" "),t._m(7),t._v(" "),s("p",[t._v('日志打印"RMB:module state : Running"时，模块启动成功。')]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),s("p",[t._v("获取到源代码后，可以自己通过源代码生成可使用的脚本程序。在nuls2.0根目录运行脚本package.sh执行自动打包程序(脚本需要依赖jdk11,maven3.3,git).")]),t._v(" "),s("p",[t._v("执行打包程序，将/usr/local/java/jdk11.0.2目录下的JDK作为运行环境复制到钱包目录中。钱包可运行程序输出到../NULS2这个相对目录中。")]),t._v(" "),t._m(10),s("p",[t._v("日志输出XXXX PACKAGE FINISH时，打包程序生成成功。")]),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("更多的package.sh脚本参数可通过-h查看帮助。")]),t._v(" "),t._m(12),s("p",[t._v("钱包使用方法请参见"),s("router-link",{attrs:{to:"/zh/NULS2.0/linuxTutorial.html"}},[t._v("命令行使用手册")]),t._v("。")],1)])},a,!1,null,null,null);n.options.__file="packageGeneration.md";e.default=n.exports}}]);