(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{518:function(e,t,a){"use strict";a.r(t);var i=a(0),s=Object(i.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("p",[e._v('Gasper is a combination of Casper the Friendly Finality Gadget (Casper-FFG) and the LMD-GHOST fork choice algorithm. Together these components form the consensus mechanism securing proof-of-stake ENULS. Casper is the mechanism that upgrades certain blocks to "finalized" so that new entrants into the network can be confident that they are syncing the canonical chain. The fork choice algorithm uses accumulated votes to ensure that nodes can easily select the correct one when forks arise in the blockchain.')]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),a("p",[e._v("To understand this material it is necessary to read the introductory page on "),a("router-link",{attrs:{to:"/developers/docs/consensus-mechanisms/pos/"}},[e._v("proof-of-stake")]),e._v(".")],1),e._v(" "),e._m(2),e._v(" "),a("p",[e._v("Gasper sits on top of a proof-of-stake blockchain where nodes provide NULS as a security deposit that can be destroyed if they are lazy or dishonest in proposing or validating blocks. Gasper is the mechanism defining how validators get rewarded and punished, decide which blocks to accept and reject, and which fork of the blockchain to build on.")]),e._v(" "),e._m(3),e._v(" "),a("p",[e._v("Finality is a property of certain blocks that means they cannot be reverted unless there has been a critical consensus failure and an attacker has destroyed at least 1/3 of the total staked NULS. Finalized blocks can be thought of as information the blockchain is certain about. A block must pass through a two-step upgrade procedure for a block to be finalized:")]),e._v(" "),e._m(4),e._v(" "),a("p",[e._v('These block upgrades do not happen in every slot. Instead, only epoch-boundary blocks can be justified and finalized. These blocks are known as "checkpoints". Upgrading considers pairs of checkpoints. A "supermajority link" must exist between two successive checkpoints (i.e. two-thirds of the total staked NULS voting that checkpoint B is the correct descendant of checkpoint A) to upgrade the less recent checkpoint to finalized and the more recent block to justified.')]),e._v(" "),a("p",[e._v("Because finality requires a two-thirds agreement that a block is canonical, an attacker cannot possibly create an alternative finalized chain without:")]),e._v(" "),e._m(5),e._v(" "),a("p",[e._v("The first condition arises because two-thirds of the staked NULS is required to finalize a chain. The second condition arises because if two-thirds of the total stake has voted in favor of both forks, then one-third must have voted on both. Double-voting is a slashing condition that would be maximally punished, and one-third of the total stake would be destroyed. As of May 2022, this requires an attacker to burn around $10 billion worth of NULS. The algorithm that justifies and finalizes blocks in Gasper is a slightly modified form of "),a("a",{attrs:{href:"https://arxiv.org/pdf/1710.09437.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Casper the Friendly Finality Gadget (Casper-FFG)"),a("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(6),e._v(" "),a("p",[e._v('Validators get rewarded for honestly proposing and validating blocks. NULS is rewarded and added to their stake. On the other hand, validators that are absent and fail to act when called upon miss out on these rewards and sometimes lose a small portion of their existing stake. However, the penalties for being offline are small and, in most cases, amount to opportunity costs of missing rewards. However, some validator actions are very difficult to do accidentally and signify some malicious intent, such as proposing multiple blocks for the same slot, attesting to multiple blocks for the same slot, or contradicting previous checkpoint votes. These are "slashable" behaviors that are penalized more harshlyâ€”slashing results in some portion of the validator\'s stake being destroyed and the validator being removed from the network of validators. This process takes 36 days. On Day 1, there is an initial penalty of up to 0.5 NULS. Then the slashed validator\'s NULS slowly drains away across the exit period, but on Day 18, they receive a "correlation penalty", which is larger when more validators are slashed around the same time. The maximum penalty is the entire stake. These rewards and penalties are designed to incentivize honest validators and disincentivize attacks on the network.')]),e._v(" "),e._m(7),e._v(" "),a("p",[e._v('As well as security, Gasper also provides "plausible liveness". This is the condition that as long as two-thirds of the total staked NULS is voting honestly and following the protocol, the chain will be able to finalize irrespective of any other activity (such as attacks, latency issues, or slashings). Put another way, one-third of the total staked NULS must be somehow compromised to prevent the chain from finalizing. In Gasper, there is an additional line of defense against a liveness failure, known as the "inactivity leak". This mechanism activates when the chain has failed to finalize for more than four epochs. The validators that are not actively attesting to the majority chain have their stake gradually drained away until the majority regains two-thirds of the total stake, ensuring that liveness failures are only temporary.')]),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),a("p",[e._v('LMD-GHOST stands for "latest message-driven greedy heaviest observed sub-tree". This is a jargon-heavy way to define an algorithm that selects the fork with the greatest accumulated weight of attestations as the canonical one (greedy heaviest subtree) and that if multiple messages are received from a validator, only the latest one is considered (latest-message driven). Before adding the heaviest block to its canonical chain, every validator assesses each block using this rule.')]),e._v(" "),e._m(10),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://arxiv.org/pdf/2003.03052.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gasper: Combining GHOST and Casper"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://arxiv.org/pdf/1710.09437.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("Capser the Friendly Finality Gadget"),a("OutboundLink")],1)])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Note")]),this._v(" that the original definition of Casper-FFG was updated slightly for inclusion in Gasper. On this page we consider the updated version.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"prerequisites"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[this._v("#")]),this._v(" Prerequisites")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"the-role-of-gasper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-role-of-gasper"}},[this._v("#")]),this._v(" The role of Gasper")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"what-is-finality"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-is-finality"}},[this._v("#")]),this._v(" What is finality?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v('Two-thirds of the total staked NULS must have voted in favor of that block\'s inclusion in the canonical chain. This condition upgrades the block to "justified". Justified blocks are unlikely to be reverted, but they can be under certain conditions.')]),this._v(" "),t("li",[this._v('When another block is justified on top of a justified block, it is upgraded to "finalized". Finalizing a block is a commitment to include the block in the canonical chain. It cannot be reverted unless an attacker destroys millions of NULS (billions of $USD).')])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("Owning or manipulating two-thirds of the total staked NULS.")]),this._v(" "),t("li",[this._v("Destroying at least one-third of the total staked NULS.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"incentives-and-slashing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#incentives-and-slashing"}},[this._v("#")]),this._v(" Incentives and Slashing")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"inactivity-leak"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inactivity-leak"}},[this._v("#")]),this._v(" Inactivity Leak")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"fork-choice"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fork-choice"}},[this._v("#")]),this._v(" Fork choice")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The original definition of Casper-FFG included a fork choice algorithm that imposed the rule: "),t("code",[this._v("follow the chain containing the justified checkpoint that has the greatest height")]),this._v(" where height is defined as the greatest distance from the genesis block. In Gasper, the original fork choice rule is deprecated in favor of a more sophisticated algorithm called LMD-GHOST. It is important to realize that under normal conditions, a fork choice rule is unnecessary - there is a single block proposer for every slot, and honest validators attest to it. It is only in cases of large network asynchronicity or when a dishonest block proposer has equivocated that a fork choice algorithm is required. However, when those cases do arise, the fork choice algorithm is a critical defense that secures the correct chain.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"further-reading"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#further-reading"}},[this._v("#")]),this._v(" Further Reading")])}],!1,null,null,null);t.default=s.exports}}]);