<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开发业务模块 | NULS</title>
    <meta name="description" content="NULS">
    <link rel="icon" href="/icon.png">
    
    <link rel="preload" href="/assets/css/0.styles.3751d6d5.css" as="style"><link rel="preload" href="/assets/js/app.15dd29f7.js" as="script"><link rel="preload" href="/assets/js/20.5171c565.js" as="script"><link rel="prefetch" href="/assets/js/10.2cc8f5c2.js"><link rel="prefetch" href="/assets/js/100.d3a152d6.js"><link rel="prefetch" href="/assets/js/101.2a081cb7.js"><link rel="prefetch" href="/assets/js/102.a47ba456.js"><link rel="prefetch" href="/assets/js/103.d5ac9751.js"><link rel="prefetch" href="/assets/js/104.7595a7fc.js"><link rel="prefetch" href="/assets/js/105.828dda8f.js"><link rel="prefetch" href="/assets/js/106.e754f194.js"><link rel="prefetch" href="/assets/js/107.775c5175.js"><link rel="prefetch" href="/assets/js/108.8b1f0e7f.js"><link rel="prefetch" href="/assets/js/109.2f3b3253.js"><link rel="prefetch" href="/assets/js/11.b0ceb74e.js"><link rel="prefetch" href="/assets/js/110.aa04c678.js"><link rel="prefetch" href="/assets/js/111.f62d78bb.js"><link rel="prefetch" href="/assets/js/112.69acd927.js"><link rel="prefetch" href="/assets/js/113.888160f3.js"><link rel="prefetch" href="/assets/js/114.29e41199.js"><link rel="prefetch" href="/assets/js/115.d2ee5369.js"><link rel="prefetch" href="/assets/js/116.51fc87d4.js"><link rel="prefetch" href="/assets/js/117.4c9dc648.js"><link rel="prefetch" href="/assets/js/118.83070636.js"><link rel="prefetch" href="/assets/js/119.665c7995.js"><link rel="prefetch" href="/assets/js/12.02dfbd69.js"><link rel="prefetch" href="/assets/js/120.214bbe7a.js"><link rel="prefetch" href="/assets/js/121.bf9971ed.js"><link rel="prefetch" href="/assets/js/122.7560b52a.js"><link rel="prefetch" href="/assets/js/123.1d267c1f.js"><link rel="prefetch" href="/assets/js/124.f5bbb448.js"><link rel="prefetch" href="/assets/js/125.376b8644.js"><link rel="prefetch" href="/assets/js/126.f44dfff9.js"><link rel="prefetch" href="/assets/js/127.4bfabc7b.js"><link rel="prefetch" href="/assets/js/128.f1386192.js"><link rel="prefetch" href="/assets/js/129.bc8e43b2.js"><link rel="prefetch" href="/assets/js/13.6ff2f0d4.js"><link rel="prefetch" href="/assets/js/130.cacc4ae3.js"><link rel="prefetch" href="/assets/js/131.84d456ba.js"><link rel="prefetch" href="/assets/js/132.2aae8ca6.js"><link rel="prefetch" href="/assets/js/133.1a312ad1.js"><link rel="prefetch" href="/assets/js/134.703ce965.js"><link rel="prefetch" href="/assets/js/135.8cee3887.js"><link rel="prefetch" href="/assets/js/136.b36f5811.js"><link rel="prefetch" href="/assets/js/137.eda59c8e.js"><link rel="prefetch" href="/assets/js/138.551346e5.js"><link rel="prefetch" href="/assets/js/139.3a3f1471.js"><link rel="prefetch" href="/assets/js/14.fa820f23.js"><link rel="prefetch" href="/assets/js/140.1e504789.js"><link rel="prefetch" href="/assets/js/141.4bf908a3.js"><link rel="prefetch" href="/assets/js/142.618b966f.js"><link rel="prefetch" href="/assets/js/143.36491f90.js"><link rel="prefetch" href="/assets/js/144.76d9a156.js"><link rel="prefetch" href="/assets/js/145.be4615d5.js"><link rel="prefetch" href="/assets/js/146.a073f6bd.js"><link rel="prefetch" href="/assets/js/147.fec28542.js"><link rel="prefetch" href="/assets/js/148.1a4b00b2.js"><link rel="prefetch" href="/assets/js/149.6671cebe.js"><link rel="prefetch" href="/assets/js/15.1f656e2a.js"><link rel="prefetch" href="/assets/js/150.75db4652.js"><link rel="prefetch" href="/assets/js/151.b3ee235e.js"><link rel="prefetch" href="/assets/js/152.63fb9894.js"><link rel="prefetch" href="/assets/js/153.852b7cff.js"><link rel="prefetch" href="/assets/js/154.dbd3a07d.js"><link rel="prefetch" href="/assets/js/155.6f6f946b.js"><link rel="prefetch" href="/assets/js/156.8e16b0e8.js"><link rel="prefetch" href="/assets/js/157.8dbfeb43.js"><link rel="prefetch" href="/assets/js/158.919c857b.js"><link rel="prefetch" href="/assets/js/159.09925f42.js"><link rel="prefetch" href="/assets/js/16.aa19419e.js"><link rel="prefetch" href="/assets/js/160.797785d9.js"><link rel="prefetch" href="/assets/js/161.4d34eb09.js"><link rel="prefetch" href="/assets/js/162.94099c67.js"><link rel="prefetch" href="/assets/js/163.9f984d63.js"><link rel="prefetch" href="/assets/js/164.9e26163d.js"><link rel="prefetch" href="/assets/js/165.c8de855f.js"><link rel="prefetch" href="/assets/js/166.d8e0213d.js"><link rel="prefetch" href="/assets/js/167.778d1b2a.js"><link rel="prefetch" href="/assets/js/168.6ad455d7.js"><link rel="prefetch" href="/assets/js/169.f26a480a.js"><link rel="prefetch" href="/assets/js/17.4eef6f4e.js"><link rel="prefetch" href="/assets/js/170.9f0e1298.js"><link rel="prefetch" href="/assets/js/171.fc4a1cfb.js"><link rel="prefetch" href="/assets/js/172.d5c28bec.js"><link rel="prefetch" href="/assets/js/173.2cfc6896.js"><link rel="prefetch" href="/assets/js/174.6ac11f1d.js"><link rel="prefetch" href="/assets/js/175.ff16c02e.js"><link rel="prefetch" href="/assets/js/176.5d7156d4.js"><link rel="prefetch" href="/assets/js/177.89dacd78.js"><link rel="prefetch" href="/assets/js/178.a59d32eb.js"><link rel="prefetch" href="/assets/js/179.a6c468fe.js"><link rel="prefetch" href="/assets/js/18.f6c2f0b8.js"><link rel="prefetch" href="/assets/js/180.ebd647d5.js"><link rel="prefetch" href="/assets/js/181.872ce38a.js"><link rel="prefetch" href="/assets/js/182.0db6d70c.js"><link rel="prefetch" href="/assets/js/183.963128a1.js"><link rel="prefetch" href="/assets/js/184.b537b1fa.js"><link rel="prefetch" href="/assets/js/185.30696c6b.js"><link rel="prefetch" href="/assets/js/186.0ad2973d.js"><link rel="prefetch" href="/assets/js/187.ada551ca.js"><link rel="prefetch" href="/assets/js/188.0bf963be.js"><link rel="prefetch" href="/assets/js/189.39991fc7.js"><link rel="prefetch" href="/assets/js/19.c066ca9d.js"><link rel="prefetch" href="/assets/js/190.7453b0ea.js"><link rel="prefetch" href="/assets/js/191.6f8d2b48.js"><link rel="prefetch" href="/assets/js/192.ffa7a0ae.js"><link rel="prefetch" href="/assets/js/193.6b5187de.js"><link rel="prefetch" href="/assets/js/194.33c85b12.js"><link rel="prefetch" href="/assets/js/195.6ce6baa9.js"><link rel="prefetch" href="/assets/js/196.b7f7795d.js"><link rel="prefetch" href="/assets/js/197.56c70085.js"><link rel="prefetch" href="/assets/js/198.2b4a23bb.js"><link rel="prefetch" href="/assets/js/199.07618bd4.js"><link rel="prefetch" href="/assets/js/2.434158f1.js"><link rel="prefetch" href="/assets/js/200.cd38ef32.js"><link rel="prefetch" href="/assets/js/201.63a35536.js"><link rel="prefetch" href="/assets/js/202.8463e76c.js"><link rel="prefetch" href="/assets/js/203.c2eff4d8.js"><link rel="prefetch" href="/assets/js/204.1b6a7ee2.js"><link rel="prefetch" href="/assets/js/205.84d64836.js"><link rel="prefetch" href="/assets/js/21.db5c56e6.js"><link rel="prefetch" href="/assets/js/22.498863f8.js"><link rel="prefetch" href="/assets/js/23.9f1f092a.js"><link rel="prefetch" href="/assets/js/24.2dd53084.js"><link rel="prefetch" href="/assets/js/25.0460bbcd.js"><link rel="prefetch" href="/assets/js/26.cac7fce9.js"><link rel="prefetch" href="/assets/js/27.d07d1fcb.js"><link rel="prefetch" href="/assets/js/28.af448362.js"><link rel="prefetch" href="/assets/js/29.014f7be8.js"><link rel="prefetch" href="/assets/js/3.944c2fb9.js"><link rel="prefetch" href="/assets/js/30.71024fdc.js"><link rel="prefetch" href="/assets/js/31.a1d400ee.js"><link rel="prefetch" href="/assets/js/32.f6916684.js"><link rel="prefetch" href="/assets/js/33.7a11d236.js"><link rel="prefetch" href="/assets/js/34.2e902b60.js"><link rel="prefetch" href="/assets/js/35.77cbe800.js"><link rel="prefetch" href="/assets/js/36.b4a03b7d.js"><link rel="prefetch" href="/assets/js/37.835e1993.js"><link rel="prefetch" href="/assets/js/38.d905a078.js"><link rel="prefetch" href="/assets/js/39.9a0ea84a.js"><link rel="prefetch" href="/assets/js/4.10b50b1a.js"><link rel="prefetch" href="/assets/js/40.6894dc38.js"><link rel="prefetch" href="/assets/js/41.9abdd72f.js"><link rel="prefetch" href="/assets/js/42.791cbfec.js"><link rel="prefetch" href="/assets/js/43.b4204359.js"><link rel="prefetch" href="/assets/js/44.79523177.js"><link rel="prefetch" href="/assets/js/45.52dab45f.js"><link rel="prefetch" href="/assets/js/46.d45f0044.js"><link rel="prefetch" href="/assets/js/47.66798c19.js"><link rel="prefetch" href="/assets/js/48.2f7186f9.js"><link rel="prefetch" href="/assets/js/49.eeb6792f.js"><link rel="prefetch" href="/assets/js/5.54beffe8.js"><link rel="prefetch" href="/assets/js/50.76124638.js"><link rel="prefetch" href="/assets/js/51.b430df64.js"><link rel="prefetch" href="/assets/js/52.dc55c14c.js"><link rel="prefetch" href="/assets/js/53.336f003c.js"><link rel="prefetch" href="/assets/js/54.5f4ba8e6.js"><link rel="prefetch" href="/assets/js/55.07cb4238.js"><link rel="prefetch" href="/assets/js/56.051d4b4e.js"><link rel="prefetch" href="/assets/js/57.bd3f6e79.js"><link rel="prefetch" href="/assets/js/58.220ce9c8.js"><link rel="prefetch" href="/assets/js/59.896c6030.js"><link rel="prefetch" href="/assets/js/6.0c2e36a1.js"><link rel="prefetch" href="/assets/js/60.c437b838.js"><link rel="prefetch" href="/assets/js/61.f607b3ec.js"><link rel="prefetch" href="/assets/js/62.a2eb63e8.js"><link rel="prefetch" href="/assets/js/63.7b74ed20.js"><link rel="prefetch" href="/assets/js/64.ab1a2432.js"><link rel="prefetch" href="/assets/js/65.23af0670.js"><link rel="prefetch" href="/assets/js/66.2cf2b73c.js"><link rel="prefetch" href="/assets/js/67.dd039849.js"><link rel="prefetch" href="/assets/js/68.c1f2396d.js"><link rel="prefetch" href="/assets/js/69.f64d6dc5.js"><link rel="prefetch" href="/assets/js/7.66c6371d.js"><link rel="prefetch" href="/assets/js/70.1b8f30ff.js"><link rel="prefetch" href="/assets/js/71.6abde1ee.js"><link rel="prefetch" href="/assets/js/72.a80f16f5.js"><link rel="prefetch" href="/assets/js/73.6690fcbd.js"><link rel="prefetch" href="/assets/js/74.d7f82bfd.js"><link rel="prefetch" href="/assets/js/75.fc906157.js"><link rel="prefetch" href="/assets/js/76.106a4524.js"><link rel="prefetch" href="/assets/js/77.ad77edec.js"><link rel="prefetch" href="/assets/js/78.10c7b197.js"><link rel="prefetch" href="/assets/js/79.08097c6d.js"><link rel="prefetch" href="/assets/js/8.b37e7034.js"><link rel="prefetch" href="/assets/js/80.c33bd3c0.js"><link rel="prefetch" href="/assets/js/81.c1c8227b.js"><link rel="prefetch" href="/assets/js/82.042ca332.js"><link rel="prefetch" href="/assets/js/83.371427a4.js"><link rel="prefetch" href="/assets/js/84.95658ce6.js"><link rel="prefetch" href="/assets/js/85.e4365ba5.js"><link rel="prefetch" href="/assets/js/86.c5ed5194.js"><link rel="prefetch" href="/assets/js/87.1a56019a.js"><link rel="prefetch" href="/assets/js/88.a0664933.js"><link rel="prefetch" href="/assets/js/89.365bb774.js"><link rel="prefetch" href="/assets/js/9.c34e88ed.js"><link rel="prefetch" href="/assets/js/90.2330af89.js"><link rel="prefetch" href="/assets/js/91.25be9d8a.js"><link rel="prefetch" href="/assets/js/92.7fca59f6.js"><link rel="prefetch" href="/assets/js/93.5d25de24.js"><link rel="prefetch" href="/assets/js/94.52f3f774.js"><link rel="prefetch" href="/assets/js/95.3da9bca5.js"><link rel="prefetch" href="/assets/js/96.24b73c87.js"><link rel="prefetch" href="/assets/js/97.cd2d42fb.js"><link rel="prefetch" href="/assets/js/98.a520e926.js"><link rel="prefetch" href="/assets/js/99.22c2d988.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3751d6d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><!----> <span class="site-name">NULS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/learn/" class="nav-link">了解NULS</a></div><div class="nav-item"><a href="/zh/NULS1.0/" class="nav-link">NULS1.0</a></div><div class="nav-item"><a href="/zh/NULS2.0/" class="nav-link router-link-active">NULS2.0</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NULS2.0/developModule.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/NULS2.0/developModule.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/learn/" class="nav-link">了解NULS</a></div><div class="nav-item"><a href="/zh/NULS1.0/" class="nav-link">NULS1.0</a></div><div class="nav-item"><a href="/zh/NULS2.0/" class="nav-link router-link-active">NULS2.0</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/NULS2.0/developModule.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/NULS2.0/developModule.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>介绍</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh/NULS2.0/NULS2.0Introduction.html" class="sidebar-link">NULS 2.0 介绍</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Alpha</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh/NULS2.0/quickStart.html" class="sidebar-link">快速开始</a></li><li><a href="/zh/NULS2.0/packageGeneration.html" class="sidebar-link">生成程序包</a></li><li><a href="/zh/NULS2.0/developModule.html" class="active sidebar-link">开发业务模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/NULS2.0/developModule.html#​添加模块但不增加协议" class="sidebar-link">​添加模块但不增加协议</a></li><li class="sidebar-sub-header"><a href="/zh/NULS2.0/developModule.html#添加新协议" class="sidebar-link">添加新协议</a></li></ul></li><li><a href="/zh/NULS2.0/linuxTutorial.html" class="sidebar-link">Linux CLI 手册</a></li><li><a href="/zh/NULS2.0/howToUseNulsBuildChain.html" class="sidebar-link">搭建区块链</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>智能合约</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh/NULS2.0/startSmartContract.html" class="sidebar-link">快速入门</a></li><li><a href="/zh/NULS2.0/developerManual.html" class="sidebar-link">开发手册</a></li><li><a href="/zh/NULS2.0/ideaPlugin.html" class="sidebar-link">IDEA插件</a></li><li><a href="/zh/NULS2.0/NRC-20TokenStandard.html" class="sidebar-link">NRC-20合约标准</a></li><li><a href="/zh/NULS2.0/smartContractFee.html" class="sidebar-link">手续费</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="开发业务模块"><a href="#开发业务模块" aria-hidden="true" class="header-anchor">#</a> 开发业务模块</h1> <p>​	阅读本文之前,请先阅读<a href="/zh/NULS2.0/packageGeneration.html">生成程序包</a></p> <p>​	NULS2.0是基于模块化开发的区块链项目。根据区块链的特点以及NULS特有的POC共识机制，我们已内置账户、账本、网络、区块管理、交易管理、共识、智能合约模块，这些模块已经可以满足NULS2.0区块链节点的正常运行。但基础模块不可能满足所有的业务需求，本文会引导开发者如何添加自己的模块以及如何添加自己的协议。</p> <p>​	在添加模块之前，我们首先应该对业务做需求分析，需要明确的知道，添加的模块只是对现有协议的封装与加工处理，还是说现有的协议不满足业务的需求，必须要新增加协议与协议的逻辑处理来实现功能。</p> <p>​	本文用api-module和account两个已开发的模块来举例说明如何添加自己的模块（两个模块均为JAVA开发，可到https://github.com/nuls-io/nuls_2.0上下载源码阅读）。</p> <h2 id="​添加模块但不增加协议"><a href="#​添加模块但不增加协议" aria-hidden="true" class="header-anchor">#</a> ​添加模块但不增加协议</h2> <p>​	api-module模块负责对钱包内已存储的区块数据做二次解析，给钱包页面和浏览器提供可展示的信息。因此模块不需要额外增加协议。</p> <ol><li>在ModuleE枚举类里添加新模块</li></ol> <p><img src="/assets/img/1.6f2046a8.png" alt="1553663833553"></p> <ol start="2"><li><p>创建模块的Bootstrap启动类</p> <p>启动类需继承RpcModule类，便于mykernel核心模块管理。继承之后需要实现特有方法，如下图所示：</p> <p><img src="/assets/img/2.e042a947.png" alt="1553663980380"></p></li></ol> <p>添加依赖模块：如果你的模块需要调用其他模块的接口查询相关数据，或者是需要其他模块运行之后，你的模块才能正常运行，就需要在这里添加所依赖的模块。如下图所示：</p> <p><img src="/assets/img/3.2a598d4a.png" alt="1553664139545"></p> <p>模块初始化：如果模块有需要初始化的数据，可以在这里实现，init方法里必须调用super.init()，确保依赖注入成功。如下图所示：</p> <p><img src="/assets/img/4.ab76dd1b.png" alt="1553670103524"></p> <p>启动运行：启动运行里可以启动自己的服务进程，启动成功后返回true，若启动失败，程序捕获异常后返回false，告知mykernel核心模块。如下图所示：</p> <p><img src="data:image/png;base64,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" alt="1553672430011"></p> <p>依赖模块已启动： 走到这一步表面你所依赖的模块都已经成功启动，这个时候就可以调用其他模块的接口了。</p> <p>api-module模块主要功能就是查询其他模块的接口，然后解析数据返回给钱包页面展示，因此模块真正的运行是在scheduleManager.start()这一步做的，内部的实现详见源码。</p> <p><img src="/assets/img/6.b4a2a10c.png" alt="1553673258491"></p> <p>到此为止，api-module模块已经成功加入nusl2.0。由于没有新增的协议，模块内部只需要编写模块本身的业务功能即可。</p> <h2 id="添加新协议"><a href="#添加新协议" aria-hidden="true" class="header-anchor">#</a> 添加新协议</h2> <p>​	我们用账户模块的别名交易来举例说明如何新增协议。别名交易顾名思义就是账户发送一个交易，交易里带有账户想要设置的别名信息，一旦交易被共识节点成功打包到区块中，就表明账户设置别名成功。页面在显示该账户信息的时候都会显示账户别名。</p> <p>​	第一步：添加交易类型</p> <p>​	 每一种交易都需要单独设置自己的交易类型。交易类型不能与其他模块的交易类型重复。有关其他模块的交易类型，详见RPC文档。</p> <p>​	第二步：创建交易逻辑对象</p> <p>​	交易逻辑对象属于交易里存储的业务逻辑数据，例如别名交易里就存的别名信息，对象需继承TransactionLogicData类。如下图：</p> <p><img src="/assets/img/7.71c33714.png" alt="1553678236166"></p> <p>​	由于逻辑数据最终会序列化为byte数组在网络中广播，因此还需要实现序列化和反序列化的方法。如下图：</p> <p><img src="/assets/img/8.33bf5b49.png" alt="1553678379934"></p> <p>​</p> <p>第三步：创建交易相关RPC接口。接口应包括创建交易、验证交易、处理交易、回滚处理交易。</p> <p>用户通过创建交易接口能顺利组装交易并广播到全网；</p> <p>验证交易接口会由交易管理模块统一调用，验证失败的交易会丢弃；</p> <p>验证通过的交易会由共识模块统一调用处理交易接口，存储到本地数据库中;</p> <p>当有区块回滚时，由区块管理模块统一调用回滚交易接口，将存储在本地的交易相关数据清除；</p> <p>有关代码的实现详见：io.nuls.account.rpc.cmd.AliasCmd</p> <p>第四步：启动模块注册交易</p> <p>模块在启动的时候，需要在doStart()里向交易管理模块注册自己模块新增的交易，以及对应的验证器和处理器，如下图：</p> <p><img src="/assets/img/9.ae82c2b9.png" alt="1553680391073"></p> <p><img src="/assets/img/10.a44ca8c2.png" alt="1553680314226"></p> <p>之后就和api-module一样，在自己的模块里添加其他业务逻辑相关的代码实现即可。</p> <p>最后，记得在模块的类下添加module.ncf配置文件，如下图：</p> <p><img src="/assets/img/11.144a1b5d.png" alt="1553680677761"></p> <p><img src="/assets/img/12.2924df38.png" alt="1553680686807"></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/nuls-io/devsite/edit/dev/docs/zh/NULS2.0/developModule.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2019-3-28 00:38:23</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/zh/NULS2.0/packageGeneration.html" class="prev">
          生成程序包
        </a></span> <span class="next"><a href="/zh/NULS2.0/linuxTutorial.html">
          Linux CLI 手册
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.15dd29f7.js" defer></script><script src="/assets/js/20.5171c565.js" defer></script>
  </body>
</html>
