<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chain Management Module Design Document |  </title>
    <meta name="description" content="Making It Easier To Innovate">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.601feec8.css" as="style"><link rel="preload" href="/assets/js/app.2df9194a.js" as="script"><link rel="preload" href="/assets/js/20.88ddbd1c.js" as="script"><link rel="prefetch" href="/assets/js/10.0c5e14a0.js"><link rel="prefetch" href="/assets/js/100.9bc70f99.js"><link rel="prefetch" href="/assets/js/101.e70e6488.js"><link rel="prefetch" href="/assets/js/102.36d0eeb6.js"><link rel="prefetch" href="/assets/js/103.c48f6d10.js"><link rel="prefetch" href="/assets/js/104.36753511.js"><link rel="prefetch" href="/assets/js/105.d147a0e1.js"><link rel="prefetch" href="/assets/js/106.f182ac7d.js"><link rel="prefetch" href="/assets/js/107.1969c1c9.js"><link rel="prefetch" href="/assets/js/108.c4161ad1.js"><link rel="prefetch" href="/assets/js/109.d2fc6225.js"><link rel="prefetch" href="/assets/js/11.7172d40b.js"><link rel="prefetch" href="/assets/js/110.fc717fd0.js"><link rel="prefetch" href="/assets/js/111.e520750d.js"><link rel="prefetch" href="/assets/js/112.33215634.js"><link rel="prefetch" href="/assets/js/113.9487a4e1.js"><link rel="prefetch" href="/assets/js/114.4af66897.js"><link rel="prefetch" href="/assets/js/115.ed788b3b.js"><link rel="prefetch" href="/assets/js/116.a3aa3f28.js"><link rel="prefetch" href="/assets/js/117.fbb038f5.js"><link rel="prefetch" href="/assets/js/118.410c8a90.js"><link rel="prefetch" href="/assets/js/119.e980ed78.js"><link rel="prefetch" href="/assets/js/12.b157bf5f.js"><link rel="prefetch" href="/assets/js/120.8c80d17f.js"><link rel="prefetch" href="/assets/js/121.119f8321.js"><link rel="prefetch" href="/assets/js/122.2d6bb1e9.js"><link rel="prefetch" href="/assets/js/123.b04b0728.js"><link rel="prefetch" href="/assets/js/124.c6799b6b.js"><link rel="prefetch" href="/assets/js/125.4bed92f5.js"><link rel="prefetch" href="/assets/js/126.1124084b.js"><link rel="prefetch" href="/assets/js/127.3ef53bc0.js"><link rel="prefetch" href="/assets/js/128.ec5465b4.js"><link rel="prefetch" href="/assets/js/129.fa88d4f1.js"><link rel="prefetch" href="/assets/js/13.ded8ed02.js"><link rel="prefetch" href="/assets/js/130.a59920b5.js"><link rel="prefetch" href="/assets/js/131.6f6a30ae.js"><link rel="prefetch" href="/assets/js/132.dd3264be.js"><link rel="prefetch" href="/assets/js/133.9cf69d7d.js"><link rel="prefetch" href="/assets/js/134.044ab96a.js"><link rel="prefetch" href="/assets/js/135.0039ff10.js"><link rel="prefetch" href="/assets/js/136.e2e2a54e.js"><link rel="prefetch" href="/assets/js/137.a805007d.js"><link rel="prefetch" href="/assets/js/138.f1c7f601.js"><link rel="prefetch" href="/assets/js/139.2663676f.js"><link rel="prefetch" href="/assets/js/14.518e22ea.js"><link rel="prefetch" href="/assets/js/140.71976055.js"><link rel="prefetch" href="/assets/js/141.5a61780a.js"><link rel="prefetch" href="/assets/js/142.16220828.js"><link rel="prefetch" href="/assets/js/143.ff3fcc2d.js"><link rel="prefetch" href="/assets/js/144.c59d3810.js"><link rel="prefetch" href="/assets/js/145.84df8247.js"><link rel="prefetch" href="/assets/js/146.db747b14.js"><link rel="prefetch" href="/assets/js/147.e90628dd.js"><link rel="prefetch" href="/assets/js/148.c43ff8fd.js"><link rel="prefetch" href="/assets/js/149.b937fefc.js"><link rel="prefetch" href="/assets/js/15.4b3dc8bd.js"><link rel="prefetch" href="/assets/js/150.99281254.js"><link rel="prefetch" href="/assets/js/151.c38d135d.js"><link rel="prefetch" href="/assets/js/152.754bf6a4.js"><link rel="prefetch" href="/assets/js/16.13d0211e.js"><link rel="prefetch" href="/assets/js/17.f6e10861.js"><link rel="prefetch" href="/assets/js/18.cb2593a2.js"><link rel="prefetch" href="/assets/js/19.4edbd542.js"><link rel="prefetch" href="/assets/js/2.3da0e489.js"><link rel="prefetch" href="/assets/js/21.faa96d43.js"><link rel="prefetch" href="/assets/js/22.38f942c3.js"><link rel="prefetch" href="/assets/js/23.3f297858.js"><link rel="prefetch" href="/assets/js/24.f60196ef.js"><link rel="prefetch" href="/assets/js/25.36c9da09.js"><link rel="prefetch" href="/assets/js/26.2019d528.js"><link rel="prefetch" href="/assets/js/27.ebe9591a.js"><link rel="prefetch" href="/assets/js/28.8a71b3ce.js"><link rel="prefetch" href="/assets/js/29.761f1315.js"><link rel="prefetch" href="/assets/js/3.3b28a50c.js"><link rel="prefetch" href="/assets/js/30.0d78fd34.js"><link rel="prefetch" href="/assets/js/31.455baee2.js"><link rel="prefetch" href="/assets/js/32.ee627427.js"><link rel="prefetch" href="/assets/js/33.ce1f9222.js"><link rel="prefetch" href="/assets/js/34.da477209.js"><link rel="prefetch" href="/assets/js/35.61d6313b.js"><link rel="prefetch" href="/assets/js/36.45ef79c2.js"><link rel="prefetch" href="/assets/js/37.8d584f1f.js"><link rel="prefetch" href="/assets/js/38.5daa3c2b.js"><link rel="prefetch" href="/assets/js/39.3fee31fb.js"><link rel="prefetch" href="/assets/js/4.9bf7c824.js"><link rel="prefetch" href="/assets/js/40.64ebbb72.js"><link rel="prefetch" href="/assets/js/41.0caac018.js"><link rel="prefetch" href="/assets/js/42.e9a0686e.js"><link rel="prefetch" href="/assets/js/43.46a6c6ec.js"><link rel="prefetch" href="/assets/js/44.71db9aeb.js"><link rel="prefetch" href="/assets/js/45.8420eebd.js"><link rel="prefetch" href="/assets/js/46.3ffccd37.js"><link rel="prefetch" href="/assets/js/47.0dc8e60f.js"><link rel="prefetch" href="/assets/js/48.4a25340b.js"><link rel="prefetch" href="/assets/js/49.81251dda.js"><link rel="prefetch" href="/assets/js/5.f8fa80eb.js"><link rel="prefetch" href="/assets/js/50.7a68e1b2.js"><link rel="prefetch" href="/assets/js/51.810ace8e.js"><link rel="prefetch" href="/assets/js/52.3fb11e5b.js"><link rel="prefetch" href="/assets/js/53.51e1b163.js"><link rel="prefetch" href="/assets/js/54.a193919b.js"><link rel="prefetch" href="/assets/js/55.ed77a75a.js"><link rel="prefetch" href="/assets/js/56.cf8d783d.js"><link rel="prefetch" href="/assets/js/57.0c17175b.js"><link rel="prefetch" href="/assets/js/58.3ddb5f2e.js"><link rel="prefetch" href="/assets/js/59.68a213bb.js"><link rel="prefetch" href="/assets/js/6.1c8f1000.js"><link rel="prefetch" href="/assets/js/60.a0636ebc.js"><link rel="prefetch" href="/assets/js/61.fc72f2e7.js"><link rel="prefetch" href="/assets/js/62.4fa897e2.js"><link rel="prefetch" href="/assets/js/63.2d20b2a2.js"><link rel="prefetch" href="/assets/js/64.d5daa534.js"><link rel="prefetch" href="/assets/js/65.594e30f7.js"><link rel="prefetch" href="/assets/js/66.a868f08c.js"><link rel="prefetch" href="/assets/js/67.611d69ab.js"><link rel="prefetch" href="/assets/js/68.2ecfeb2d.js"><link rel="prefetch" href="/assets/js/69.299a4679.js"><link rel="prefetch" href="/assets/js/7.6ddd6e53.js"><link rel="prefetch" href="/assets/js/70.db68d2a2.js"><link rel="prefetch" href="/assets/js/71.ce42dcd6.js"><link rel="prefetch" href="/assets/js/72.38ac2674.js"><link rel="prefetch" href="/assets/js/73.bd7f9811.js"><link rel="prefetch" href="/assets/js/74.0afd81ce.js"><link rel="prefetch" href="/assets/js/75.e3619d1c.js"><link rel="prefetch" href="/assets/js/76.2d0d598d.js"><link rel="prefetch" href="/assets/js/77.92f479e8.js"><link rel="prefetch" href="/assets/js/78.95fc9d7c.js"><link rel="prefetch" href="/assets/js/79.bfd42746.js"><link rel="prefetch" href="/assets/js/8.57bc7818.js"><link rel="prefetch" href="/assets/js/80.79249f41.js"><link rel="prefetch" href="/assets/js/81.94e759cb.js"><link rel="prefetch" href="/assets/js/82.0808b875.js"><link rel="prefetch" href="/assets/js/83.84b2875f.js"><link rel="prefetch" href="/assets/js/84.bfc04846.js"><link rel="prefetch" href="/assets/js/85.b8453670.js"><link rel="prefetch" href="/assets/js/86.53298a14.js"><link rel="prefetch" href="/assets/js/87.332e1ec8.js"><link rel="prefetch" href="/assets/js/88.eec1ee38.js"><link rel="prefetch" href="/assets/js/89.9de51cb3.js"><link rel="prefetch" href="/assets/js/9.9b98df55.js"><link rel="prefetch" href="/assets/js/90.93579a5d.js"><link rel="prefetch" href="/assets/js/91.9494f211.js"><link rel="prefetch" href="/assets/js/92.f3f4a19f.js"><link rel="prefetch" href="/assets/js/93.fb09d292.js"><link rel="prefetch" href="/assets/js/94.396b8118.js"><link rel="prefetch" href="/assets/js/95.df06706e.js"><link rel="prefetch" href="/assets/js/96.46d03f61.js"><link rel="prefetch" href="/assets/js/97.1aaa0edd.js"><link rel="prefetch" href="/assets/js/98.56c53e9d.js"><link rel="prefetch" href="/assets/js/99.09ea7286.js">
    <link rel="stylesheet" href="/assets/css/0.styles.601feec8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> </span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/Docs/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><a href="/ENULS/" class="nav-link">ENULS</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docs/d_chain_manager.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/Docs/d_chain_manager.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/Docs/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><a href="/ENULS/" class="nav-link">ENULS</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docs/d_chain_manager.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/Docs/d_chain_manager.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Module Design</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/d_network.html" class="sidebar-link">Network module design document</a></li><li><a href="/Docs/d_ledger.html" class="sidebar-link">Design document of ledger module</a></li><li><a href="/Docs/d_chain_manager.html" aria-current="page" class="active sidebar-link">Chain Management Module Design Document</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#overall-description" class="sidebar-link">Overall description</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#_1-1-module-overview" class="sidebar-link">1.1 Module Overview</a></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#_1-2-module-internal-architecture-diagram" class="sidebar-link">1.2 Module internal architecture diagram</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#functional-design" class="sidebar-link">Functional design</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#_2-1-functional-architecture" class="sidebar-link">2.1 Functional Architecture</a></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#_2-2-module-service" class="sidebar-link">2.2 Module Service</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#event-description" class="sidebar-link">Event description</a></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#agreement" class="sidebar-link">Agreement</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#_4-1-network-communication-protocol" class="sidebar-link">4.1 Network Communication Protocol</a></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#_4-2-trading-agreement" class="sidebar-link">4.2 Trading Agreement</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#module-configuration" class="sidebar-link">Module Configuration</a></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#java-specific-design" class="sidebar-link">Java-specific design</a></li><li class="sidebar-sub-header"><a href="/Docs/d_chain_manager.html#supplementary-content" class="sidebar-link">Supplementary content</a></li></ul></li><li><a href="/Docs/d_account.html" class="sidebar-link">Account Module Design Document</a></li><li><a href="/Docs/d_smart_contract.html" class="sidebar-link">Smart contract module design</a></li><li><a href="/Docs/d_transaction.html" class="sidebar-link">Transaction management module Design document</a></li><li><a href="/Docs/d_cross_chain.html" class="sidebar-link">Overall description</a></li><li><a href="/Docs/d_consensus.html" class="sidebar-link">Consensus Module Design Document</a></li><li><a href="/Docs/d_public_service.html" class="sidebar-link">Public-Service Module Design Document</a></li><li><a href="/Docs/d_block.html" class="sidebar-link">Block Management Module Design Document</a></li><li><a href="/Docs/d_protocol_update.html" class="sidebar-link">Upgrade module design document</a></li><li><a href="/Docs/d_address.html" class="sidebar-link">NULS Protocol Address</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Interface</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/i_rpc_protocol.html" class="sidebar-link">NULS Application Interface Services</a></li><li><a href="/Docs/i_public_service.html" class="sidebar-link">Public Service</a></li><li><a href="/Docs/i_nuls-api_JSONRPC.html" class="sidebar-link">API-JSONRPC</a></li><li><a href="/Docs/i_nuls-api_RESTFUL.html" class="sidebar-link">API-RESTFUL</a></li><li><a href="/Docs/i_account.html" class="sidebar-link">Account Module</a></li><li><a href="/Docs/i_chain-manager.html" class="sidebar-link">Why should I have the Chain Management module?</a></li><li><a href="/Docs/i_cross-chain.html" class="sidebar-link">Interface List</a></li><li><a href="/Docs/i_network.html" class="sidebar-link">Why should I have &quot;Network Module&quot;?</a></li><li><a href="/Docs/i_block.html" class="sidebar-link">Block Module</a></li><li><a href="/Docs/i_transaction.html" class="sidebar-link">Transaction module</a></li><li><a href="/Docs/i_consensus.html" class="sidebar-link">poc Consensus Module</a></li><li><a href="/Docs/i_smart-contract.html" class="sidebar-link">Smart contract module</a></li><li><a href="/Docs/i_ledger.html" class="sidebar-link">Ledger Module</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>ChainBox</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/c_chain_box.html" class="sidebar-link">NULS ChainBox</a></li><li><a href="/Docs/c_module.html" class="sidebar-link">Develope Module</a></li><li><a href="/Docs/c_message_module.html" class="sidebar-link">Encrypted Message Module Demo</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Smart Contract</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/s_manual.html" class="sidebar-link">Development Manual</a></li><li><a href="/Docs/s_tools.html" class="sidebar-link">Development Tool</a></li><li><a href="/Docs/s_nrc20.html" class="sidebar-link">NRC-20</a></li><li><a href="/Docs/s_nrc721.html" class="sidebar-link">NRC-721</a></li><li><a href="/Docs/s_offline_assembly.html" class="sidebar-link">Smart contract offline assembly</a></li><li><a href="/Docs/s_advance.html" class="sidebar-link">Advanced Description</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="chain-management-module-design-document"><a href="#chain-management-module-design-document" class="header-anchor">#</a> Chain Management Module Design Document</h1> <h2 id="overall-description"><a href="#overall-description" class="header-anchor">#</a> Overall description</h2> <h3 id="_1-1-module-overview"><a href="#_1-1-module-overview" class="header-anchor">#</a> 1.1 Module Overview</h3> <h4 id="_1-1-1-why-should-i-have-the-chain-management-module"><a href="#_1-1-1-why-should-i-have-the-chain-management-module" class="header-anchor">#</a> 1.1.1 Why should I have the &quot;chain management&quot; module?</h4> <p>[^Description]: Reasons for the existence of the module</p> <p>In nuls 1.0, there is only one chain (nuls main network), so no chain management module is needed.</p> <p>In nuls 2.0, the nuls main network can register other parallel chain information, including:</p> <ul><li>Chains in the nuls ecosystem: Derived from the same set of code as the nuls main network.</li> <li>Other chains: Bitcoin, Ethereum, etc.</li></ul> <p>The Chain Management module is used to manage all parallel links to the nuls main network.</p> <p>Glossary:</p> <ul><li>nuls main network: The architecture is different from nuls 1.0, which is another chain that runs independently, also known as nuls 2.0.
&quot;Chain Management&quot; is one of the modules of the nuls main network.</li> <li>Parallel chain: other chains registered on the nuls main network</li></ul> <p>Hypothesis 1: Parallel chain a, which owns assets a</p> <p>Hypothesis 2: Parallel chain b, which owns asset b</p> <ul><li>Cross-chain trading:
<ul><li>Parallel chain a turns asset a to parallel chain b</li> <li>Parallel chain b internal transfer of assets a</li> <li>Parallel chain b turns asset a back to parallel chain a</li> <li>Parallel chain b transfers asset a to other parallel chains (c, d, etc.)</li></ul></li> <li>Non-chain trades:
<ul><li>Parallel chain a internal transfer of assets a</li> <li>Parallel chain b internal transfer of assets b</li></ul></li></ul> <p>Remarks: Regardless of the assets in the chain or the assets outside the chain, as long as the assets are traded across the chain, the main network needs to be confirmed.</p> <h4 id="_1-1-2-what-to-do-with-chain-management"><a href="#_1-1-2-what-to-do-with-chain-management" class="header-anchor">#</a> 1.1.2 What to do with &quot;Chain Management&quot;</h4> <p>[^Description]: What does the module do and what it aims to achieve, the goal is to let non-technical personnel know what to do</p> <p>The Chain Management module is used to manage the basic information of the chain that joins the nuls main network, including:</p> <ul><li>Register a new parallel chain</li> <li>Destroy existing parallel chains</li> <li>Query parallel chain information</li> <li>Parallel chain increases asset type</li> <li>Parallel chain destruction asset type</li> <li>Cross-chain asset verification</li></ul> <h4 id="_1-1-3-chain-management-positioning-in-the-system"><a href="#_1-1-3-chain-management-positioning-in-the-system" class="header-anchor">#</a> 1.1.3 &quot;Chain Management&quot; positioning in the system</h4> <p>[^Description]: The positioning of the module in the system, what role, which modules to rely on, what can be done, what can be used to do</p> <p>The module that Chain Management relies heavily on:</p> <ul><li>Core module</li> <li>Network module</li> <li>Transaction management module</li> <li>Account module</li></ul> <p>&quot;chain management&quot; weakly dependent modules:</p> <ul><li>Event bus module</li></ul> <h3 id="_1-2-module-internal-architecture-diagram"><a href="#_1-2-module-internal-architecture-diagram" class="header-anchor">#</a> 1.2 Module internal architecture diagram</h3> <p>[^Description]: Graphic description module hierarchy, component relationship, and description by text</p> <p><img src="/assets/img/architecture.784f3b18.png" alt></p> <h2 id="functional-design"><a href="#functional-design" class="header-anchor">#</a> Functional design</h2> <h3 id="_2-1-functional-architecture"><a href="#_2-1-functional-architecture" class="header-anchor">#</a> 2.1 Functional Architecture</h3> <p>[^Description]: Describes the functional design of the module, which can have a hierarchical relationship, which can be displayed in the form of a graphic and illustrated with text.</p> <p><img src="/assets/img/structure.2a58a4c4.png" alt></p> <h3 id="_2-2-module-service"><a href="#_2-2-module-service" class="header-anchor">#</a> 2.2 Module Service</h3> <p>[^Description]: Here, which services are provided by the module, the function description of each service, the process description, and the external services depended on the implementation of the interface definition.</p> <h4 id="_2-2-1-registering-a-new-chain"><a href="#_2-2-1-registering-a-new-chain" class="header-anchor">#</a> 2.2.1 Registering a new chain</h4> <ul><li><p>Function Description:</p> <p>The nuls main network will provide an entry (web page) through which you can register a new parallel link to the nuls main network.</p> <p>Registering a parallel chain must contain a registered asset.</p></li> <li><p>Process description</p> <p><img src="/assets/img/chainRegister.9111e337.png" alt></p></li></ul> <p>Step description:</p> <ol><li><p>The user registers the registration chain information with the terminal and the asset information initialized with the chain.</p></li> <li><p>The chain management module performs the encapsulation of the chain transaction and sends it to the transaction module.During the period, you need to obtain account balance and transaction nonce value through the ledger module.</p></li></ol> <p>And verify the correctness of the account through the account module.</p> <p>After the transaction is sent, the success or failure information is returned to the user. When successful, the information includes the main network cross-chain seed node and the primary network seed certifier list information.</p> <ol start="3"><li><p>The trading module will perform a callback of the data check during the transaction process.</p></li> <li><p>The chain management module performs registration data submission through the transaction module callback &quot;commit chain registration transaction&quot; interface.</p></li> <li><p>The chain management module stores the data and sends the registration information to the network module and the cross-chain protocol module.</p></li> <li><p>The registration chain requires 1000nuls, of which 20% is directly destroyed, 80% is used for mortgages, and is returned when assets are deleted.</p></li></ol> <ul><li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>Register friendchain information with the chain management module.</p> <pre><code>    method : cm_chainReg
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;chainId&quot;: 152,
        &quot;assetId&quot;: 2,
        &quot;chainName&quot;: &quot;nuls chain&quot;,
        &quot;addressType&quot;: &quot;1&quot;,
        &quot;magicNumber&quot;:454546,
        &quot;supportInflowAsset&quot;:&quot;1&quot;,
        &quot;minAvailableNodeNum&quot;:5,
        &quot;singleNodeMinConnectionNum&quot;:5,
        &quot;txConfirmedBlockNum&quot;:30,
        &quot;address&quot;:&quot;NsdxSexqXF4eVXkcGLPpZCPKo92A8xpp&quot;,
        &quot;assetId&quot;:85,
        &quot;symbol&quot;:&quot;NULS&quot;,
        &quot;assetName&quot;: &quot;NAS&quot;,
        &quot;initNumber&quot;:&quot;1000000000&quot;,
        &quot;decimalPlaces&quot;:8,
        &quot;password&quot;:&quot;xxxxxxxxxxxxx&quot;
        
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Chain Identification</td></tr> <tr><td style="text-align:left">assetId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>asset id</td></tr> <tr><td style="text-align:left">chainName</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>chain name</td></tr> <tr><td style="text-align:left">magicNumber</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>Network Magic Parameters</td></tr> <tr><td style="text-align:left">minAvailableNodeNum</td> <td style="text-align:left">false</td> <td style="text-align:left">int</td> <td>minimum number of available nodes</td></tr> <tr><td style="text-align:left">addressPrefix</td> <td style="text-align:left">true</td> <td style="text-align:left">String</td> <td>Address Prefix</td></tr> <tr><td style="text-align:left">txConfirmBlockNum</td> <td style="text-align:left">false</td> <td style="text-align:left">int</td> <td>Transaction Confirmation Blocks</td></tr> <tr><td style="text-align:left">maxSignatureCount</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Maximum Signatures</td></tr> <tr><td style="text-align:left">signatureBFTRatio</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Byzantine ratio [67-100]</td></tr> <tr><td style="text-align:left">verifierList</td> <td style="text-align:left">true</td> <td style="text-align:left">String</td> <td>Initial Authenticator List for the Registration Chain</td></tr> <tr><td style="text-align:left">symbol</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>Asset Symbol</td></tr> <tr><td style="text-align:left">assetName</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>asset name</td></tr> <tr><td style="text-align:left">initNumber</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>Asset Initial Value</td></tr> <tr><td style="text-align:left">decimalPlaces</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Minimum Assets Separable Digits</td></tr> <tr><td style="text-align:left">address</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>create the primary network address of the chain</td></tr> <tr><td style="text-align:left">password</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>password for private key</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
{
  &quot;mainNetVerifierSeeds&quot; : &quot;tNULSeBaMkrt4z9FYEkkR9D6choPVvQr94oYZp&quot;,
  &quot;txHash&quot; : &quot;25b3a57507086d5d895895b41ef744a160f3251f4e5db118b7ca833eb6c9fff3&quot;,
  &quot;mainNetCrossConnectSeeds&quot; : &quot;192.168.1.192:8088&quot;
}
</code></pre></div></li> <li><p>Return field description</p></li></ul> <table><thead><tr><th>parameter</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td>mainNetVerifierSeeds</td> <td>String</td> <td>#主网认证者列表</td></tr></tbody></table> <p>TxHash String hash Trading
| mainNetCrossConnectSeeds | String | #main network cross-chain seed connection node|</p></li></ul> <ul><li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Network Management Module</li> <li>Transaction management module, send transaction</li> <li>Book module to obtain account information</li> <li>Account module</li></ul></li></ul> <h4 id="_2-2-2-unregistering-existing-parallel-chains"><a href="#_2-2-2-unregistering-existing-parallel-chains" class="header-anchor">#</a> 2.2.2 Unregistering existing parallel chains</h4> <ul><li><p>Function Description:</p> <p>The nuls main network will provide an entry (web page) through which you can log out existing friends.</p></li> <li><p>Process description</p> <p><img src="/assets/img/chainDestroy.013520b1.png" alt></p></li></ul> <ol><li><p>The chain is created with the asset, so the logout chain must be checked for assets. Only the last asset will be deleted and the chain will be logged off.</p></li> <li><p>Conditions for determining whether to allow cancellation:</p></li></ol> <p>Assets and chains exist.</p> <p>There is only one last asset with the chain.</p> <p>Chain assets have n% of assets in their own main chain.</p> <ol start="3"><li>The chain management module performs the encapsulation of the chain transaction and sends it to the transaction module.</li></ol> <p>During the period, you need to obtain the account balance and the transaction nonce value through the ledger module.</p> <ol start="4"><li><p>The transaction module will perform a data verification callback during the transaction processing.</p></li> <li><p>The chain management module performs the logout data submission by the transaction module callback &quot;commit chain cancellation transaction&quot; interface.</p></li> <li><p>The chain management module stores the data and sends the registration information to the network module.</p></li> <li><p>Deleting the chain with the cancelled assets will return 80% of the mortgage deposit.</p></li></ol> <ul><li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>The friend chain information is logged out to the chain management module (the asset logout interface is called because the chain is logged off with the last asset).</p> <pre><code>    method : cm_assetDisable
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;chainId&quot;: 152,
        &quot;assetId&quot;: 45,
        &quot;address&quot;:&quot;NsdxSexqXF4eVXkcGLPpZCPKo92A8xpp&quot;,
        &quot;password&quot;:&quot;xxxxxxxxxxxxx&quot;
        
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Chain Identification</td></tr> <tr><td style="text-align:left">assetId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>asset id</td></tr> <tr><td style="text-align:left">address</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>Create the main network account address of the chain</td></tr> <tr><td style="text-align:left">password</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>password for private key</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
{
    &quot;txHash&quot; : &quot;25b3a57507086d5d895895b41ef744a160f3251f4e5db118b7ca833eb6c9fff3&quot;
}
</code></pre></div></li> <li><p>Return field description</p></li></ul> <table><thead><tr><th>parameter</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td>txHash</td> <td>String</td> <td>Trading hash</td></tr></tbody></table></li> <li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Network Management Module</li> <li>Transaction management module, send transaction</li> <li>Book module, checkbook information</li></ul></li></ul> <h4 id="_2-2-3-adding-asset-information"><a href="#_2-2-3-adding-asset-information" class="header-anchor">#</a> 2.2.3 Adding asset information</h4> <ul><li><p>Function Description:</p> <p>The nuls main network will provide an entry (web page) through which to select the chain and register assets.</p></li> <li><p>Process description</p></li></ul> <p><img src="/assets/img/assetRegister.b72c7a79.png" alt></p> <p>Step description:</p> <ol><li><p>The user enters the asset information through the terminal selection chain and the chain: whether the assets overlap.</p></li> <li><p>The chain management module performs the encapsulation of the chain transaction and sends it to the transaction module.</p></li></ol> <p>During the period, you need to obtain the account balance and the transaction nonce value through the ledger module.</p> <ol start="3"><li><p>The trading module will perform a callback of the data check during the transaction process.</p></li> <li><p>The chain management module performs registration data submission through the transaction module callback &quot;commit asset registration transaction&quot; interface.</p></li> <li><p>Registered assets receive 1000nuls, 20% of which are directly destroyed, 80% used for mortgage, and returned when assets are deleted.</p></li></ol> <ul><li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>Register asset information with the chain management module.</p> <pre><code>    method : cm_assetReg
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;chainId&quot;: 152,
        &quot;assetId&quot;:85,
        &quot;symbol&quot;:&quot;NULS&quot;,
        &quot;assetName&quot;: &quot;NAS&quot;,
        &quot;initNumber&quot;:&quot;1000000000&quot;,
        &quot;decimalPlaces&quot;:8,
         &quot;address&quot;:&quot;NsdxSexqXF4eVXkcGLPpZCPKo92A8xpp&quot;,
        &quot;password&quot;:&quot;xxxxxxxxxxxxx&quot;
        
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Chain Identification</td></tr> <tr><td style="text-align:left">symbol</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>Asset Symbol</td></tr> <tr><td style="text-align:left">assetName</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>asset name</td></tr> <tr><td style="text-align:left">initNumber</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>Asset Initial Value</td></tr> <tr><td style="text-align:left">decimalPlaces</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Minimum Assets Separable Digits</td></tr> <tr><td style="text-align:left">address</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>create the primary network address of the chain</td></tr> <tr><td style="text-align:left">password</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>password for private key</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
{
    &quot;txHash&quot; : &quot;25b3a57507086d5d895895b41ef744a160f3251f4e5db118b7ca833eb6c9fff3&quot;
}
</code></pre></div></li> <li><p>Return field description</p></li></ul> <table><thead><tr><th>parameter</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td>txHash</td> <td>String</td> <td>Trading hash</td></tr></tbody></table></li> <li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Transaction management module, send transaction</li> <li>Book module to obtain account information</li> <li>Account module verification</li></ul></li></ul> <h4 id="_2-2-4-parallel-chain-asset-write-off"><a href="#_2-2-4-parallel-chain-asset-write-off" class="header-anchor">#</a> 2.2.4 Parallel chain asset write-off</h4> <ul><li><p>Function Description:</p> <p>The nuls main network will provide an entry (web page) through which the asset can be destroyed for the specified friend chain.</p></li> <li><p>Process description</p> <p><img src="/assets/img/assetDestroy.62602f22.png" alt></p> <ol><li><p>When there are multiple assets registered, the single asset is allowed to be written off. If there is only one asset, the asset is written off along with the chain.</p> <ol start="2"><li>Conditions for determining whether to allow cancellation:</li></ol></li></ol> <p>There are multiple assets in the chain.</p> <p>Chain assets have n% of assets in their own main chain.</p> <ol start="3"><li>The chain management module performs the encapsulation of the chain transaction and sends it to the transaction module.</li></ol> <p>During the period, you need to obtain the account balance and the transaction nonce value through the ledger module.</p> <ol start="4"><li><p>The transaction module will perform a data verification callback during the transaction processing.</p></li> <li><p>The chain management module performs the logout data submission by the transaction module callback &quot;commit chain cancellation transaction&quot; interface.</p></li> <li><p>The cancellation of the assets will be refunded 80% of the mortgage deposit.</p></li></ol></li> <li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>Log out the asset information to the chain management module.</p> <pre><code>    method : cm_assetDisable
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;chainId&quot;: 152,
        &quot;assetId&quot;: 45,
        &quot;address&quot;:&quot;NsdxSexqXF4eVXkcGLPpZCPKo92A8xpp&quot;,
        &quot;password&quot;:&quot;xxxxxxxxxxxxx&quot;
        
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Chain Identification</td></tr> <tr><td style="text-align:left">assetId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>asset id</td></tr> <tr><td style="text-align:left">address</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>Create the main network account address of the chain</td></tr> <tr><td style="text-align:left">password</td> <td style="text-align:left">true</td> <td style="text-align:left">string</td> <td>password for private key</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
{
    &quot;txHash&quot; : &quot;25b3a57507086d5d895895b41ef744a160f3251f4e5db118b7ca833eb6c9fff3&quot;
}
</code></pre></div></li> <li><p>Return field description</p></li></ul> <table><thead><tr><th>parameter</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td>txHash</td> <td></td> <td></td></tr></tbody></table> <ul><li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Transaction management module, send transaction</li> <li>Book module, checkbook information</li></ul></li></ul></li></ul> <h4 id="_2-2-5-chain-asset-verification-for-cross-chain-transactions"><a href="#_2-2-5-chain-asset-verification-for-cross-chain-transactions" class="header-anchor">#</a> 2.2.5 Chain asset verification for cross-chain transactions</h4> <ul><li><p>Function Description:</p> <p>When the transaction module generates a cross-chain transaction, the interface is called to perform cross-chain asset verification.</p></li> <li><p>Process description</p> <ol><li>Check chain and assets are registered normally in the cross-chain module</li> <li>Verify that the amount of assets on the chain is overdrawn.</li> <li>Verify that the asset status is normal.</li></ol></li> <li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>Submit verification to chain management when cross-chain assets are in circulation</p> <pre><code>    method : cm_assetCirculateValidator
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;chainId&quot;: 12345,   
        &quot;txHex&quot;: &quot;FFAABB214324&quot;       
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>chain id</td></tr> <tr><td style="text-align:left">txHex</td> <td style="text-align:left">true</td> <td style="text-align:left">String</td> <td>Transaction HEX Value</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
{
    &quot;value&quot;:true
}

</code></pre></div></li> <li><p>Return field description</p></li></ul> <table><thead><tr><th>parameter</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td></td> <td></td> <td></td></tr></tbody></table></li> <li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Transaction management module, cross-chain transaction check call</li></ul></li></ul> <h4 id="_2-2-6-chain-asset-submission-for-cross-chain-trading"><a href="#_2-2-6-chain-asset-submission-for-cross-chain-trading" class="header-anchor">#</a> 2.2.6 Chain asset submission for cross-chain trading</h4> <ul><li><p>Function Description:</p> <p>When a block submission is made through a verified transaction, the trading module will assemble and cross-chain transactions to the cross-chain management module.</p> <p>Used to change chain assets and used for the management of chain assets.</p></li> <li><p>Process description</p> <ol><li>Call the cm_assetCirculateCommit interface directly</li></ol></li> <li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>When the cross-chain asset is circulated, the transaction can be submitted to the chain management when the verification is passed and the confirmation is submitted.</p> <pre><code>    method : cm_assetCirculateCommit
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;chainId&quot;:12345,
        &quot;txHexList&quot;: &quot;[FFAABB214324,FFAABB214324]&quot; ，
         &quot;blockHeaderDigest&quot;: &quot;FFAABB214324&quot;
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>chain id</td></tr> <tr><td style="text-align:left">txHexList</td> <td style="text-align:left">true</td> <td style="text-align:left">array</td> <td>HEX value of the transaction</td></tr> <tr><td style="text-align:left">blockHeaderDigest</td> <td style="text-align:left">true</td> <td style="text-align:left">array</td> <td>Block Header Information</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
{
    &quot;value&quot;:true
}
</code></pre></div></li> <li><p>Return field description</p></li></ul> <table><thead><tr><th>parameter</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td></td> <td></td> <td></td></tr></tbody></table></li> <li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Transaction management module, cross-chain trading call</li></ul> <h4 id="_2-2-7-chain-asset-rollback-for-cross-chain-trading"><a href="#_2-2-7-chain-asset-rollback-for-cross-chain-trading" class="header-anchor">#</a> 2.2.7 Chain asset rollback for cross-chain trading</h4> <ul><li><p>Function Description:</p> <p>Used for block transaction rollback</p></li> <li><p>Process description</p> <ol><li>Call the cm_assetCirculateRollBack interface directly</li></ol></li> <li><p>Interface definition</p> <ul><li><p>Interface Description</p> <pre><code>      method : cm_assetCirculateRollBack
</code></pre></li> <li><p>Request example</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
        &quot;chainId&quot;:12345,
        &quot;txHexList&quot;: &quot;[FFAABB214324,FFAABB214324]&quot; ，
         &quot;blockHeaderDigest&quot;: &quot;FFAABB214324&quot; 
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>chain id</td></tr> <tr><td style="text-align:left">txHexList</td> <td style="text-align:left">true</td> <td style="text-align:left">array</td> <td>HEX List of Transactions</td></tr> <tr><td style="text-align:left">blockHeaderDigest</td> <td style="text-align:left">true</td> <td style="text-align:left">array</td> <td>Block Header Information</td></tr></tbody></table> <ul><li><p>Return to example</p></li> <li><p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format
{
    &quot;value&quot;:true
}
</code></pre></div></li> <li><p>Return field description</p></li></ul> <table><thead><tr><th>parameter</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td></td> <td></td> <td></td></tr></tbody></table></li> <li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Transaction management module, cross-chain trading call</li></ul></li></ul></li></ul> <h4 id="_2-2-8-registration-of-chain-management-transaction-processing-functions"><a href="#_2-2-8-registration-of-chain-management-transaction-processing-functions" class="header-anchor">#</a> 2.2.8 Registration of chain management transaction processing functions</h4> <ul><li><p>Function Description:</p> <p>When the module is started, registration of the transaction callback function is required, so that the transaction module performs callback processing when performing related type transaction processing.</p> <p>The registration function is divided into 4 categories: 1&gt; Transaction Verification 2&gt; Transaction Submission 3&gt; Transaction Rollback 4&gt; Module Bulk Transaction Verification in One Block</p></li> <li><p>Process description</p> <ol><li>Chain management module starts</li> <li>Determine whether the transaction module rpc call status is accessible.</li> <li>Submit the callback interface</li></ol></li> <li><p>Interface definition</p> <p>See the &quot;Registering a Transaction&quot; section in the Transaction Module Design Document.</p></li> <li><p>Dependent service</p> <p>[^Description]: What are the services that the text description depends on, and what to do</p> <ul><li>Transaction management module</li></ul></li></ul> <h4 id="_2-2-9-query-chain-information"><a href="#_2-2-9-query-chain-information" class="header-anchor">#</a> 2.2.9 Query chain information</h4> <ul><li><p>Function Description:</p> <p>Query registration chain information</p></li> <li><p>Process description</p></li></ul> <p>No</p> <ul><li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>Query the registration friend chain information.</p> <pre><code>    method : cm_chain
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
   &quot;chainId&quot;:4545 
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Chain Identification</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code> {
  &quot;chainId&quot; : 3,
  &quot;chainName&quot; : &quot;testchain&quot;,
  &quot;addressType&quot; : &quot;1&quot;,
  &quot;addressPrefix&quot; : &quot;TBTC&quot;,
  &quot;magicNumber&quot; : 123456,
  &quot;minAvailableNodeNum&quot; : 5,
  &quot;txConfirmedBlockNum&quot; : 0,
  &quot;regAddress&quot; : &quot;tNULSeBaMnrs6JKrCy6TQdzYJZkMZJDng7QAsD&quot;,
  &quot;regTxHash&quot; : &quot;6c29d99c2b02cfc766ef25bee2ea619610a5fce1d778c3038885111f590ae312&quot;,
  &quot;createTime&quot; : 1557739548367,
  &quot;verifierList&quot; : [ &quot;TBTCdusmPf5EfdEwbA8nRZEYqMbRXKp6y3oCb&quot; ],
  &quot;signatureByzantineRatio&quot; : 67,
  &quot;maxSignatureCount&quot; : 12,
  &quot;selfAssetKeyList&quot; : [ &quot;3-10&quot; ],
  &quot;totalAssetKeyList&quot; : [ &quot;3-10&quot; ]，
  &quot;mainNetVerifierSeeds&quot; : &quot;tNULSeBaMkrt4z9FYEkkR9D6choPVvQr94oYZp&quot;,
  &quot;mainNetCrossConnectSeeds&quot; : &quot;192.168.1.192:8088&quot;,
  &quot;enable&quot; : true
}
</code></pre></div></li> <li><p>Return parameter description</p> <table><thead><tr><th>parameter</th> <th>required</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td>chainId</td> <td>true</td> <td>int</td> <td>Chain Identification</td></tr> <tr><td>assetId</td> <td>true</td> <td>int</td> <td>asset id</td></tr> <tr><td>chainName</td> <td>true</td> <td>string</td> <td>chain name</td></tr> <tr><td>addressType</td> <td>true</td> <td>int</td> <td>The address type of the account created on the chain: 1 within the ecological 2 non-ecological</td></tr> <tr><td>addressPrefix</td> <td>true</td> <td>string</td> <td>address prefix 1-5 uppercase letters or numbers</td></tr> <tr><td>magicNumber</td> <td>true</td> <td>string</td> <td>Network Magic Parameters</td></tr> <tr><td>minAvailableNodeNum</td> <td>true</td> <td>int</td> <td>Minimum number of available nodes</td></tr> <tr><td>txConfirmBlockNum</td> <td>true</td> <td>int</td> <td>Transaction Confirmation Blocks</td></tr> <tr><td>regAddress</td> <td>true</td> <td>string</td> <td>Registered Payment Address</td></tr> <tr><td>regTxHash</td> <td>true</td> <td>string</td> <td>transaction hash</td></tr> <tr><td>createTime</td> <td>true</td> <td>long</td> <td>Transaction submission time, 1970 seconds difference</td></tr> <tr><td>verifierList</td> <td>true</td> <td>string</td> <td>Authenticator List</td></tr> <tr><td>signatureByzantineRatio</td> <td>true</td> <td>int</td> <td>Byzantine ratio [67-100]</td></tr> <tr><td>maxSignatureCount</td> <td>true</td> <td>int</td> <td>Maximum Signatures</td></tr> <tr><td>symbol</td> <td>true</td> <td>string</td> <td>Asset Symbol</td></tr> <tr><td>assetName</td> <td>true</td> <td>string</td> <td>asset name</td></tr> <tr><td>initNumber</td> <td>true</td> <td>string</td> <td>Asset Initial Value</td></tr> <tr><td>decimalPlaces</td> <td>true</td> <td>int</td> <td>Minimum Assets Separable Digits</td></tr> <tr><td>mainNetVerifierSeeds</td> <td>true</td> <td>string</td> <td>main network seed certifier address</td></tr> <tr><td>mainNetCrossConnectSeeds</td> <td>true</td> <td>string</td> <td>Primary Network Seed Connection Node Address</td></tr> <tr><td>enable</td> <td>true</td> <td>string</td> <td>Whether in use</td></tr></tbody></table></li></ul></li> <li><p>Dependent service</p> <p>no</p></li></ul> <h4 id="_2-2-10-querying-asset-information-under-the-chain"><a href="#_2-2-10-querying-asset-information-under-the-chain" class="header-anchor">#</a> 2.2.10 Querying asset information under the chain</h4> <ul><li><p>Function Description:</p> <p>Query information about a chain asset.</p></li> <li><p>Process description</p></li></ul> <p>No</p> <ul><li><p>Interface definition</p> <ul><li>Interface Description</li></ul> <p>Query the asset management module for an asset information.</p> <pre><code>    method : cm_asset
</code></pre> <ul><li>Request example</li></ul> <div class="language- extra-class"><pre class="language-text"><code>{
   &quot;chainId&quot;:4545， 
   &quot;assetId&quot;:45
}
</code></pre></div><ul><li>Request parameter description</li></ul> <table><thead><tr><th style="text-align:left">parameter</th> <th style="text-align:left">required</th> <th style="text-align:left">type</th> <th>description</th></tr></thead> <tbody><tr><td style="text-align:left">chainId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>Chain Identification</td></tr> <tr><td style="text-align:left">assetId</td> <td style="text-align:left">true</td> <td style="text-align:left">int</td> <td>asset id</td></tr></tbody></table> <ul><li><p>Return to example</p> <p>Failed</p> <div class="language- extra-class"><pre class="language-text"><code>Unified rpc standard format

</code></pre></div><p>Success</p> <div class="language- extra-class"><pre class="language-text"><code> {
  &quot;chainId&quot; : 10,
  &quot;assetId&quot; : 2,
  &quot;symbol&quot; : &quot;CCY&quot;,
  &quot;assetName&quot; : &quot;yuer&quot;,
  &quot;depositNuls&quot; : &quot;100000000000&quot;,
  &quot;destroyNuls&quot; : &quot;20000000000&quot;,
  &quot;initNumber&quot; : &quot;30000000000&quot;,
  &quot;decimalPlaces&quot; : 2,
  &quot;enable&quot; : false,
  &quot;createTime&quot; : 1565229429,
  &quot;address&quot; : &quot;tNULSeBaMqywZjfSrKNQKBfuQtVxAHBQ8rB2Zn&quot;,
  &quot;txHash&quot; : &quot;612eda872c6ca16c5a5f63cce70a64ac15852e2b3a403309b0d963d22d6391bc&quot;
}
</code></pre></div></li> <li><p>Return field description</p> <table><thead><tr><th>parameter</th> <th>required</th> <th>type</th> <th>description</th></tr></thead> <tbody><tr><td>chainId</td> <td>true</td> <td>int</td> <td>Chain Identification</td></tr> <tr><td>assetId</td> <td>true</td> <td>int</td> <td>asset id</td></tr> <tr><td>&lt;symbol&gt;</td> <td>true</td> <td>string</td> <td>Asset abbreviation eg BTC</td></tr> <tr><td>assetName</td> <td>true</td> <td>string</td> <td>asset name</td></tr> <tr><td>depositNuls</td> <td>true</td> <td>long</td> <td>Number of mortgaged main network assets</td></tr> <tr><td>destroyNuls</td> <td>true</td> <td>long</td> <td>Number of primary network assets destroyed</td></tr> <tr><td>initNumber</td> <td>true</td> <td>string</td> <td>Asset Initial Value</td></tr> <tr><td>decimalPlaces</td> <td>true</td> <td>int</td> <td>Asset Cuts</td></tr> <tr><td>enable</td> <td>true</td> <td>boolean</td> <td>Is available true available, false disabled</td></tr> <tr><td>createTime</td> <td>true</td> <td>long</td> <td>Transaction time</td></tr> <tr><td>address</td> <td>true</td> <td>String</td> <td>Transaction Payment Address</td></tr> <tr><td>txHash</td> <td>true</td> <td>String</td> <td>Trading hash</td></tr></tbody></table></li></ul></li> <li><p>Dependent service</p> <p>no</p></li></ul> <h2 id="event-description"><a href="#event-description" class="header-anchor">#</a> Event description</h2> <p>[^Description]: Try to avoid communication by using events in business processes</p> <ul><li>Chain registration event</li> <li>Chain logout event</li> <li>Add asset event</li> <li>Write off asset events</li></ul> <h2 id="agreement"><a href="#agreement" class="header-anchor">#</a> Agreement</h2> <h3 id="_4-1-network-communication-protocol"><a href="#_4-1-network-communication-protocol" class="header-anchor">#</a> 4.1 Network Communication Protocol</h3> <p>no</p> <h3 id="_4-2-trading-agreement"><a href="#_4-2-trading-agreement" class="header-anchor">#</a> 4.2 Trading Agreement</h3> <h5 id="_4-2-1-registering-a-new-friend-chain"><a href="#_4-2-1-registering-a-new-friend-chain" class="header-anchor">#</a> 4.2.1 Registering a new friend chain</h5> <p>Compared with the general transaction, only the type and txData are different, the specific difference is as follows</p> <p>Transaction type definition: 10101</p> <p>txData definition</p> <table><thead><tr><th>Length</th> <th>Fields</th> <th>Type</th> <th>Remark</th></tr></thead> <tbody><tr><td>2</td> <td>chainId</td> <td>uint16</td> <td>Chain Id</td></tr> <tr><td>?</td> <td>name</td> <td>byte[]</td> <td>Chain Name</td></tr> <tr><td>1</td> <td>addressType</td> <td>uint8</td> <td>Address Type</td></tr> <tr><td>5</td> <td>addressPrefix</td> <td>byte[]</td> <td>Address Prefix</td></tr> <tr><td>4</td> <td>magicNumber</td> <td>uint32</td> <td>Magic Parameters</td></tr> <tr><td>1</td> <td>supportInflowAsset</td> <td>uint8</td> <td>Whether to spend asset inflows</td></tr> <tr><td>2</td> <td>minAvailableNodeNum</td> <td>uint16</td> <td>Minimum Available Nodes</td></tr> <tr><td>?</td> <td>verifierList</td> <td>byte[]</td> <td>Authenticator List</td></tr> <tr><td>2</td> <td>signatureByzantineRatio</td> <td>uint16</td> <td>Byzantine Proportion</td></tr> <tr><td>2</td> <td>maxSignatureCount</td> <td>uint16</td> <td>Maximum Signatures</td></tr> <tr><td>?</td> <td>address</td> <td>byte[]</td> <td>Account Address</td></tr> <tr><td>2</td> <td>assetId</td> <td>uint16</td> <td>Asset id</td></tr> <tr><td>?</td> <td>symbol</td> <td>byte[]</td> <td>Unit</td></tr> <tr><td>?</td> <td>assetName</td> <td>byte[]</td> <td>Asset Name</td></tr> <tr><td>2</td> <td>depositNuls</td> <td>uint16</td> <td>Mortgage NULS Quantity</td></tr> <tr><td>48</td> <td>initNumber</td> <td>Biginteger</td> <td>Initial Assets</td></tr> <tr><td>1</td> <td>decimalPlaces</td> <td>uint8</td> <td>Minimum Split Number of Assets</td></tr></tbody></table> <h5 id="_4-2-2-unregistering-existing-friends"><a href="#_4-2-2-unregistering-existing-friends" class="header-anchor">#</a> 4.2.2 Unregistering existing friends</h5> <p>Compared with the general transaction, only the type and txData are different, the specific difference is as follows</p> <p>Transaction type definition: 10102</p> <p>txData definition: same as 4.2.1 chain registration transaction</p> <h5 id="_4-2-3-adding-a-friend-chain-asset"><a href="#_4-2-3-adding-a-friend-chain-asset" class="header-anchor">#</a> 4.2.3 Adding a friend chain asset</h5> <p>Compared with the general transaction, only the type and txData are different, the specific difference is as follows</p> <p>Transaction type definition: 10103</p> <p>txData definition:</p> <table><thead><tr><th>Length</th> <th>Fields</th> <th>Type</th> <th>Remark</th></tr></thead> <tbody><tr><td>2</td> <td>chainId</td> <td>uint16</td> <td>Chain Id</td></tr> <tr><td>2</td> <td>assetId</td> <td>uint16</td> <td>Asset id</td></tr> <tr><td>?</td> <td>symbol</td> <td>byte[]</td> <td>Unit</td></tr> <tr><td>?</td> <td>assetName</td> <td>byte[]</td> <td>Asset Name</td></tr> <tr><td>2</td> <td>depositNuls</td> <td>uint16</td> <td>Mortgage NULS Quantity</td></tr> <tr><td>48</td> <td>initNumber</td> <td>Biginteger</td> <td>Initial Assets</td></tr> <tr><td>1</td> <td>decimalPlaces</td> <td>uint8</td> <td>Minimum Split Number of Assets</td></tr> <tr><td>?</td> <td>address</td> <td>byte[]</td> <td>Account Address</td></tr></tbody></table> <h5 id="_4-2-2-unregistering-existing-assets"><a href="#_4-2-2-unregistering-existing-assets" class="header-anchor">#</a> 4.2.2 Unregistering existing assets</h5> <p>Compared with the general transaction, only the type and txData are different, the specific difference is as follows</p> <p>Transaction type definition: 10104</p> <p>txData definition: new transaction with 4.2.3 asset</p> <h2 id="module-configuration"><a href="#module-configuration" class="header-anchor">#</a> Module Configuration</h2> <p>[^Description]: This module must have configuration items</p> <div class="language- extra-class"><pre class="language-text"><code>[system]
language = en
encoding = UTF-8

[db]
rocksdb.datapath = ../data

[param]
asset_symbol_max = 5
asset_name_max = 20
asset_depositNuls = 200000
asset_depositNuls_destroy_rate = 0.2
asset_depositNuls_lock_rate = 0.8
asset_initNumber_min = 10000
asset_initNumber_max = 100000000
asset_decimalPlaces_min = 4
asset_decimalPlaces_max = 8
asset_recovery_rate = 0.9

[defaultAsset]
nuls_chain_id = 8964
nuls_chain_name = nuls chain
nuls_asset_id = 1
nuls_asset_initNumber_max = 100000000
nuls_asset_symbol = NULS
</code></pre></div><h2 id="java-specific-design"><a href="#java-specific-design" class="header-anchor">#</a> Java-specific design</h2> <p>[^Description]: Core object class definition, storage data structure, ...</p> <h2 id="supplementary-content"><a href="#supplementary-content" class="header-anchor">#</a> Supplementary content</h2> <p>[^Description]: Required content not covered above</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/nuls-io/devsite/edit/master/docs/Docs/d_chain_manager.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/9/2019, 7:49:52 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Docs/d_ledger.html" class="prev">
          Design document of ledger module
        </a></span> <span class="next"><a href="/Docs/d_account.html">
          Account Module Design Document
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.2df9194a.js" defer></script><script src="/assets/js/20.88ddbd1c.js" defer></script>
  </body>
</html>
