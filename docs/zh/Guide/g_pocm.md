# POCM使用指南

SCO 平台为项目方提供了可使用的 POCM 智能合约，用于创建 SCO 节点。NULS 持有者可以将其币委托到项目方的 SCO 节点，以获取新生成的项目代币作为回报，而不是通常的 NULS 委托挖矿回报。SCO 项目节点持续获得本应归 NULS 委托者的 NULS 委托挖矿回报，项目方可将这些回报用于项目的启动和发展。SCO 平台和 POCM 允许其他公链和资产以相同的方式在其生态内发行。

## 测试环境

POCM 是一个基于智能合约的去中心化产品，用户（尤其是项目发行方）可以在测试环境中熟悉其操作流程，以避免误用并防止资产损失。

- POCM 测试环境地址：[http://beta.pocm.nuls.io/](http://beta.pocm.nuls.io/)
- 浏览器测试环境地址：[http://beta.nulscan.io/](http://beta.nulscan.io/)

## NULS 持有者

NULS 持有者可以将其 NULS 投入到他们支持的项目中，并获得该项目的代币。投入的 NULS 是安全的，参与的步骤如下：

### 参与 POCM Stake

1. 在 [POCM 平台](http://pocm.nuls.io/) 上，点击 **选择项目** 菜单，进入页面后选择认可的项目，点击进入项目详情页面。

![image-20190917134751446](./g_pocm/user1.png)

2. 在项目详情页面，输入要抵押的 NULS 数量（必须满足项目团队设置的最低值），然后点击 **参与 POCM**。

![image-20190917135217330](./g_pocm/user2.png)

### 领取收益

1. 每过 5 个区块高度的时间，合约就会发放一次奖励。
2. 在 **用户中心** 页面右侧点击 **领取收益**。
3. 领取成功后，合约会即时将奖励转入参与地址。锁定时间结束后，代币即可使用（具体解锁时间可查看项目详情）。

> 领取奖励是一个调用合约的操作，因此需要消耗少量的 NULS。

![image-20190917143321848](./g_pocm/user3.png)

### 追加 Stake

用户可以继续参与某个项目的 POCM，也可以通过 **用户中心** 页面的参与项目列表右侧的 **追加** 按钮进行追加。

## 项目团队

项目团队可以通过 [POCM（SCO 发行平台)](https://pocm.nuls.io/) 吸引 NULS 社区成员成为初始支持者。该过程涉及获得 NULS 共识奖励作为项目发展基金。参与的步骤如下：

### 提交基本信息

1. 在 POCM 平台上点击 **选择项目** 菜单。
2. 进入页面后，点击 **发行项目** 按钮并填写基本信息并提交。

![image-20190917111842631](./g_pocm/project1.png)

### 发行通证

1. 在 POCM 平台上点击 **发行通证** 菜单。
2. 在 POCM 平台上，点击 **发行通证** 菜单。
3. 填写 NRC-20 通证信息的表单。
4. 确保通证详细信息与提交的基本信息相匹配。

![image-20190917112104017](./g_pocm/project2.png)

### 发行 POCM 合约

1. 基本信息提交后，项目团队需要向邮箱 pen@nuls.io 发送一封电子邮件，邮件内容如下：
   - 项目名称
   - 提供一个账户地址（请自行保管好地址私钥），用于后续发布 POCM 合约。

2. 得到邮件回复确认后，用户可以在 POCM 平台上导入该账户，进入 **用户中心** 页面发行 POCM 合约。

![image-20190917112918386](./g_pocm/project3.png)

3. 根据项目团队的 POCM 分发规则填写表单，然后发布合约。

![image-20190917114302953](./g_pocm/project4.png)

### 将通证转入合约

1. 将持有通证的地址导入 [钱包](https://wallet.nuls.io/)。
2. 进入 **合约** 页面，找到通证，然后点击 **调用**。

![image-20190917114719872](./g_pocm/project5.png)

3. 选择通证合约的 `transfer` 方法。

![image-20190917114912986](./g_pocm/project6.png)

4. 填写已成功发布的 POCM 合约地址，然后填写 Token 数量（考虑到小数位，需在实际数量后面添加 n 个零，其中 n = 发行 token 时设置的精度），最后点击 **调用**。

![image-20190917115135644](./g_pocm/project7.png)

5. 用户现在可以在 POCM 平台上看到该项目的信息，并可以向该项目的合约地址质押NULS。

### 添加节点

**在 NULS 网络上，通过委托 NULS 到共识节点产生的收益将会被分为两部分：**
1. 共识节点佣金（委托产生的共识奖励 * 共识节点佣金比例），该部分直接分给共识节点的奖励地址。
2. 委托者奖励（委托产生的共识奖励 - 委托产生的共识奖励 * 共识节点佣金比例），该部分直接分给委托地址。

在 POCM 平台上，POCM 合约会将用户抵押给合约的 NULS 委托给你所添加的共识节点。合约地址将会收到通过委托产生的委托者奖励。合约的创建地址有权限将委托者奖励转出，转出方法为在钱包的【合约】页面中调用 `transferConsensusRewardByOwner` 方法。

![image-20190917120103974](./g_pocm/project.png)

**节点的来源有两种方式：**
1. [自己创建节点](https://docs.nuls.io/zh/Guide/g_pocm.html)：使用该方式，项目方可以同时收到共识节点佣金和委托者奖励。
2. 使用 NULS 网络上已有的共识节点：使用该方式，项目方只能收到委托者奖励。

**节点的具体添加方法：**

在 POCM 平台上，点击【用户中心】，进入页面后点击【添加节点】，输入节点的 ID。

![image-20190917120103974](./g_pocm/project8.png)

节点添加成功后，POCM 合约将会把用户抵押的 NULS 依次委托给添加的节点，若有多个节点，委托顺序为节点的添加顺序。

若需要删除某个已添加的节点，需进入钱包（操作地址为创建 POCM 合约的地址）的【合约】页面，找到 POCM 合约，点击【调用】。

![image-20190917120103974](./g_pocm/project9.png)

选择合约的 `removeAgent` 方法，输入节点的 hash 值，点击【调用】。合约调用成功，则节点删除成功。

![image-20190917120103974](./g_pocm/project10.png)

在下个版本的 POCM 平台上将会支持直接在【用户中心】页面删除节点，请耐心等待。

## 共识节点

作为 NULS 网络的共识节点，可以与项目方合作。方式为：项目方在 POCM 平台上将你的节点添加为项目的运行节点，这样用户抵押进项目合约的 NULS 将会自动委托到你的节点上。节点可获得以下两个部分的收益：

1. 节点的委托量会增加，因此节点会收到更多 NULS 佣金。
2. 节点的创建地址会收到来自项目方的 Token，数量和节点的抵押金成正比。详细公式为：节点获得的 Token 数量 = 你的节点抵押金 /（用户抵押 NULS 总数 * 0.9 + 项目上运行的所有节点抵押金总和）* 项目方分发的 Token 总数。

**领取项目方分发 Token 的方式为：** 在 POCM 平台上导入创建节点的地址，然后进入【用户中心】，在页面中点击列表右侧的【领取奖励】，即可在自己的钱包资产页面收到 Token。
